{"version":3,"sources":["actions/scene.js","actions/posenet.js","components/ResultFailure.js","components/ResultSuccess.js","components/utils/VideoRecord.js","components/utils/SendMessage.js","components/videoPlay.js","actions/countdown.js","components/posenet/data/PosenetMath.js","components/posenet/PosenetUtils.js","components/utils/CanvasFPS.js","components/posenet/PosenetCamera.js","components/PoseNetGame/PosenetPoseScan.js","components/PoseCameraRecord.js","scene/ContentsData.js","scene/ContentsScene.js","components/FullScreenResult.js","scene/IntroScene.js","components/CameraCapture.js","scene/VideoBodyScanScene.js","scene/ContentsResultData.js","scene/FeedbackScene.js","App.js","serviceWorker.js","reducers/scene.js","reducers/posenet.js","reducers/countdown.js","reducers/index.js","index.js"],"names":["setScene","changeScene","type","_changeScene","SetSubScene","changeSubScene","_changeSubScene","SetPosenetPose","pose","_posenetPose","ClosePosenet","state","console","log","_closePosenet","useStyles","makeStyles","theme","root","position","left","top","width","height","contentsTitle","fontSize","textShadow","color","contentsFailText","retryButton","opacity","OKButton","mapDispatchToProps","connect","_currentSubScene","scene","failureCount","onOKClick","onRetryClick","classes","className","Button","onClick","variant","_mediaRecorder","undefined","_recordedChunks","_recordedChunksState","GetVideoSource","step","length","chunks","i","push","blob","Blob","URL","createObjectURL","SetIframeFullScreen","fullScreen","window","parent","postMessage","SetLandscapeMode","HybridApp","video","margin","rootFullScreen","videoFullScreen","textAlign","contentBackBoard","backgroundColor","skipGuide","right","centerPlayButton","display","contentsScreenMirror","centerPlayButtonText","playButton","skipButton","largeIcon","green","SetMaxTime","value","_maxTime","SetCurrentTime","_currentTime","title","videoUrl","enableContentsSkip","enableCountDown","enableContentsPause","onVideoPlayComplete","onVideoSkip","autoPlay","controls","enableTitleText","enableFullScreen","enableScreenMirror","playButtonRef","useRef","skipButtonRef","videoRef","backboardRef","timer","current","parseInt","currentTime","duration","useEffect","showPauseButton","id","setInterval","clearInterval","displayState","style","onPlayClick","play","onSkipClick","rootClass","videoClass","zIndex","paused","pause","onEnded","ref","playsinline","src","IconButton","aria-label","getPauseView","EnablingWiFiDisplay","process","abs_value","vec","distance","Math","pow","x","y","sqrt","get_cos","partA","partB","_canvasLastCalledTime","_canvasFPS","toTuple","drawKeyPoints","keypoints","minConfidence","skeletonColor","canvasContext","scale","forEach","keypoint","score","beginPath","arc","PI","fillStyle","fill","drawSegment","lineWidth","firstX","firstY","nextX","nextY","startX","startY","endX","endY","moveTo","lineTo","dx","dy","angle","atan2","cos","sin","drawLine","strokeStyle","stroke","drawSkeleton","adjacentKeyPoints","posenet","drawDegree","font","skelectonDir","current_angle","pivotVec","degree","acos","Posenet_GetDegreeFormVec","posX","posY","fillText","drawSkeletonDegree","_canvasFPSCount","_canvasTextColor","_canvasTextSize","CanvasFPS_Update","Date","now","CanvasFPS_Render","_miniVideoAreaBase","bottom","_miniVideoArea","_miniVideoTextArea","_fullVideoAreaBase","_fullVideoArea","_fullVideoTextArea","contentsTextBase","_contentsLoading","_miniContentsLoading","_contentsScaning","_miniContentsScaning","_distroyComponent","PoseNetCamera","props","defaultProps","getCanvas","elem","canvas","getVideo","getCameraScan","textStyle","showMiniVideo","Object","assign","getCameraInvalid","minPoseConfidence","stopCamera","bind","this","setupCamera","Error","setTimeout","setState","loading","detectPose","navigator","mediaDevices","getUserMedia","transform","screenWidth","innerWidth","screenHeight","innerHeight","audio","facingMode","stream","srcObject","Promise","resolve","onloadedmetadata","getTracks","stop","getContext","showVideo","poseDetectionFrame","algorithm","imageScaleFactor","flipHorizontal","outputStride","minPartConfidence","maxPoseDetections","nmsRadius","showDebugVideo","showPoints","showSkeleton","showSkeletonDegree","skeletonDegreeColor","skeletonLineWidth","posenetModel","findPoseDetectionFrame","a","poses","estimateMultiplePoses","estimateSinglePose","onPosenetPose","clearRect","save","translate","drawImage","restore","requestAnimationFrame","videoStyle","videoTextStyle","playsInline","Component","loadingText","_currentScene","dispatch","poseData","onClosePosenet","contentsLoading","contentsScaning","_countdown","countdown","maxHeight","contentsResult","_poseDetectionInvalidCount","_poseDetectionValidCount","_step","_title","_desc","InvalidPosenet","key","_invalidPoseKey","ValidPosenet","_validPoseKey","_recordState","_invalidPosenetList","_validPosenetList","desc","startVideoRecord","stopVideoRecord","videoElement","document","getElementById","MediaRecorder","ondataavailable","event","data","size","start","currentPercent","totalCount","validState","recoredState","valid","VideoRecord_Stop","getResultText","_contents","videoContainer","progressContainer","_lastCameraRecordStep","InvalidPosenetClear","SetCameraRecord","React","useState","setStep","getStepData","createVideoElement","url","onVideoEnded","onNextStep","nextStep","changeSceneType","contentsData","enablePlayerView","change","preStep","getPoseNetMiniCamera","titleText","splice","VideoRecord_InvalidDataClear","getResultScene","contents","getStepContents","leftTime","maxValue","text","styles","buildStyles","textColor","pathColor","trailColor","textSize","getTimer","videoRoot","contentsTitle_fail","contentsTitle_fail_desc","contentsSummery","contentsSummery_left","contentsSummery_right","_contentsSourceList","_videoFaceMask","setVideoFaceMask","recordState","list","GetVideoSourceList","onToggleVideoFaceMask","e","index","target","getAttribute","onDeleteVideo","VideoRecordDelete","isValid","contentsTitle_success_icon","data-index","poster","getRecordSuccuss","getRecordFail","validCount","getContentsSummeryText","fullSourceList","GetVideoSourceFullList","getVideoList","BottomBarBack","BottomBarButton","background","borderRadius","border","boxShadow","BottomBarButton_text_1","fontWeight","BottomBarButton_text_2","keys","k","v","getContents","_videoUserCameraFlag","rootStyle","canvasStyle","CameraCapture","getCanvasOverlay","canvasOverlay","onNextCamera","playCamera","enumerateDevices","then","devices","device","kind","label","deviceId","catch","err","name","message","updateCamera","track","facingModeText","frameRate","exact","aspectRatio","updateCameraFrame","findUpdateCameraFrame","videoWidth","videoHeight","_closeCamera","onCloseCamera","_current_scene","marginLeft","marginTop","addScanProgress","resetScanProgress","divLine","resultState","comments","count","targetIndex","time","comment","getConmentsText","App","getScene","Boolean","location","hostname","match","initialState","combineReducers","action","appElement","devTools","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","rootReducer","ReactDOM","render","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.8a3d5cfd.chunk.js","sourcesContent":["export const SETSCENE = 'SETSCENE';\r\nexport function setScene(changeScene) {\r\n    return {\r\n        type: SETSCENE,\r\n        _changeScene: changeScene\r\n    };\r\n}\r\n\r\nexport const SETSUBSCENE = 'SETSUBSCENE';\r\nexport function SetSubScene(changeSubScene) {\r\n    return {\r\n        type: SETSUBSCENE,\r\n        _changeSubScene: changeSubScene\r\n    };\r\n}\r\n","export const SETPOSENETPOSE = 'SETPOSENETPOSE';\r\nexport function SetPosenetPose(pose) {\r\n    return {\r\n        type: SETPOSENETPOSE,\r\n        _posenetPose: pose\r\n    };\r\n}\r\n\r\nexport const CLOSEPOSENET = 'CLOSEPOSENET';\r\nexport function ClosePosenet(state) {\r\n    console.log('ClosePosenet action call:' + state);\r\n    return {\r\n        type: CLOSEPOSENET,\r\n        _closePosenet: state\r\n    };\r\n}\r\n\r\nexport const INVALIDPOSENET = 'INVALIDPOSENET';\r\nexport function InvalidPosenet(key) {\r\n    //console.log('InvalidPosenet action call');\r\n    return {\r\n        type: INVALIDPOSENET,\r\n        _invalidPoseKey: key\r\n    };\r\n}\r\n\r\nexport const INVALIDPOSENET_CLEAR = 'INVALIDPOSENET_CLEAR';\r\nexport function InvalidPosenetClear() {\r\n    //console.log('InvalidPosenetClear action call');\r\n    return {\r\n        type: INVALIDPOSENET_CLEAR\r\n    };\r\n}\r\n\r\nexport const VALIDPOSENET = 'VALIDPOSENET';\r\nexport function ValidPosenet(key) {\r\n    //console.log('ValidPosenet action call');\r\n    return {\r\n        type: VALIDPOSENET,\r\n        _validPoseKey: key\r\n    };\r\n}\r\nexport const SETCAMERARECORD = 'SETCAMERARECORD';\r\nexport function SetCameraRecord(state) {\r\n    console.log('SETCAMERARECORD action call:' + state);\r\n    return {\r\n        type: SETCAMERARECORD,\r\n        _recordState: state\r\n    };\r\n}\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SetSubScene } from '../actions/scene';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'fixed',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    contentsTitle: {\r\n        position: 'absolute',\r\n        left: '5%',\r\n        top: '5%',\r\n        fontSize: '250%',\r\n        textShadow: '2px 2px 5px black',\r\n        color: 'red'\r\n    },\r\n    contentsFailText: {\r\n        position: 'absolute',\r\n        left: '5%',\r\n        top: '20%',\r\n        fontSize: '250%',\r\n        textShadow: '2px 2px 5px black',\r\n        color: 'white'\r\n    },\r\n    retryButton: {\r\n        position: 'absolute',\r\n        left: '60%',\r\n        top: '5%',\r\n        width: '30%',\r\n        height: '20%',\r\n        fontSize: '150%',\r\n        opacity: 0.5\r\n    },\r\n    OKButton: {\r\n        position: 'absolute',\r\n        left: '60%',\r\n        top: '35%',\r\n        width: '30%',\r\n        height: '20%',\r\n        fontSize: '150%',\r\n        opacity: 0.5\r\n    },\r\n}));\r\n\r\nvar _contentsTitle = '추가 기록 필요';\r\nvar _contentsFailText = 'SET';\r\nvar _retryText = '재도전';\r\nvar _OKText = '확인';\r\nexport const ResultFailure = ({ SetSubScene, _currentSubScene, failureCount, onOKClick, onRetryClick}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n        <span className={classes.contentsTitle}>{_contentsTitle}</span>\r\n        <span className={classes.contentsFailText}>{failureCount + _contentsFailText}</span>\r\n        <Button className={classes.retryButton} onClick={onRetryClick} variant=\"contained\" color=\"secondary\">{_retryText}</Button>\r\n        <Button className={classes.OKButton} onClick={onOKClick} variant=\"contained\" color=\"secondary\">{_OKText}</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  _currentSubScene: state.scene._currentSubScene\r\n});\r\nconst mapDispatchToProps = { SetSubScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultFailure);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SetSubScene } from '../actions/scene';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'fixed',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    contentsTitle: {\r\n        position: 'absolute',\r\n        left: '5%',\r\n        top: '5%',\r\n        fontSize: '250%',\r\n        textShadow: '2px 2px 5px black',\r\n        color: 'green'\r\n    },\r\n    OKButton: {\r\n        position: 'absolute',\r\n        left: '60%',\r\n        top: '35%',\r\n        width: '30%',\r\n        height: '20%',\r\n        fontSize: '150%',\r\n        opacity: 0.5\r\n    },\r\n}));\r\n\r\nvar _contentsTitle = '영상 기록 완료';\r\nvar _OKText = '확인';\r\nexport const ResultSuccess = ({ SetSubScene, _currentSubScene, onOKClick}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n        <span className={classes.contentsTitle}>{_contentsTitle}</span>\r\n        <Button className={classes.OKButton} onClick={onOKClick} variant=\"contained\" color=\"secondary\">{_OKText}</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  _currentSubScene: state.scene._currentSubScene\r\n});\r\nconst mapDispatchToProps = { SetSubScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultSuccess);\r\n","var _mediaRecorder = undefined;\r\nvar _recordedChunks = [];\r\nvar _recordedChunksState = [];\r\n\r\nexport function VideoRecord_Start(stream) {\r\n    if (undefined == stream) {\r\n        return false;\r\n    }\r\n    if (undefined != _mediaRecorder) {\r\n        return false;\r\n    }\r\n\r\n    _mediaRecorder = new MediaRecorder(stream);//, options);\r\n    _mediaRecorder.ondataavailable = function (event) {\r\n        console.log(\"data-available data count:\" + event.data.size);\r\n        if (event.data.size > 0) {\r\n            _recordedChunks.push(event.data);\r\n            console.log('reocrd count:' + _recordedChunks.length);\r\n        }\r\n    }\r\n    console.log(\"VideoRecord_Start call:\" + stream);\r\n    _mediaRecorder.start();\r\n    return true;\r\n}\r\n\r\nexport function GetVideoSourceList(recordState) {\r\n    var list = [];\r\n    for (var i = 0; i < _recordedChunksState.length; i++) {\r\n        if (_recordedChunksState[i].valid == recordState) {\r\n            var step = _recordedChunksState[i].step;\r\n            var url = GetVideoSource(step);\r\n            if (undefined != url) {\r\n                var data = {};\r\n                data.step = step;\r\n                data.url = url;\r\n                data.desc = _recordedChunksState[i].desc;\r\n                data.title = _recordedChunksState[i].title;\r\n                list.push(data);\r\n            }\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\nexport function GetVideoSourceFullList() {\r\n    var list = [];\r\n    for (var i = 0; i < _recordedChunksState.length; i++) {\r\n        //if (_recordedChunksState[i].valid == recordState) {\r\n            var step = _recordedChunksState[i].step;\r\n            var url = GetVideoSource(step);\r\n            if (undefined != url) {\r\n                var data = {};\r\n                data.step = step;\r\n                data.url = url;\r\n                data.valid = _recordedChunksState[i].valid;\r\n                data.desc = _recordedChunksState[i].desc;\r\n                data.title = _recordedChunksState[i].title;\r\n                list.push(data);\r\n            }\r\n        //}\r\n    }\r\n    return list;\r\n}\r\n\r\nexport function GetVideoSource(step) {\r\n    if (_recordedChunks.length == 0) {\r\n        console.log('GetVideoSource recordedChunks length zero');\r\n        return undefined;\r\n    }\r\n    if (_recordedChunks.length != _recordedChunksState.length) {\r\n        console.log('GetVideoSources recordedChunks, _recordedChunksState length diffrent');\r\n        return undefined;\r\n    }\r\n    var chunks = [];\r\n    for (var i = 0; i < _recordedChunksState.length; i++) {\r\n        if (_recordedChunksState[i].step == step) {\r\n            chunks.push(_recordedChunks[i]);\r\n            break;\r\n        }\r\n    }\r\n    if (chunks.length == 0) {\r\n        console.log('GetVideoSource not found step key')\r\n        return undefined;\r\n    }\r\n    var blob = new Blob(chunks, {type: \"video/webm\"});\r\n    return URL.createObjectURL(blob);\r\n}\r\n\r\nexport function VideoRecord_Download(filePath, step) {\r\n    var url = GetVideoSource(step);\r\n    if (undefined == url) {\r\n        return;\r\n    }\r\n    // var blob = new Blob(_recordedChunks, {type: \"video/webm\"});\r\n    // var url = URL.createObjectURL(blob);\r\n    var a = document.createElement(\"a\");\r\n    document.body.appendChild(a);\r\n    a.style = \"display: none\";\r\n    a.href = url;\r\n    a.download = filePath;//\"test.webm\";\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n    //_recordedChunks.length = 0;\r\n}\r\n\r\nexport function ValidVideoRecord() {\r\n    if (undefined == _mediaRecorder) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function GetVideoRecordCount() {\r\n    if (undefined == _recordedChunks) {\r\n        return 0;\r\n    }\r\n    return _recordedChunks.length;\r\n}\r\n\r\nexport function VideoRecord_Stop(recoredState, step, title, desc) {\r\n    if (undefined == _mediaRecorder) {\r\n        return false;\r\n    }\r\n    console.log(\"VideoRecord_Stop state:\" + recoredState);\r\n    var data = {};\r\n    data.valid = recoredState;\r\n    data.step = step;\r\n    data.title = title;\r\n    data.desc = desc;\r\n    _recordedChunksState.push(data);\r\n    _mediaRecorder.stop();\r\n    _mediaRecorder = undefined;\r\n    return true;\r\n}\r\n\r\nexport function VideoRecord_InvalidDataClear() {\r\n    if (_recordedChunks.length != _recordedChunksState.length) {\r\n        console.log('VideoRecord_InvalidDataClear _recordedChunks, _recordedChunksState length diffrent');\r\n        return;\r\n    }\r\n    console.log('VideoRecord_InvalidDataClear prev reocrd count:' + _recordedChunks.length);\r\n    for (var i = _recordedChunksState.length - 1; i >= 0; i--) {\r\n        if (_recordedChunksState[i].valid == false) {\r\n            console.log('VideoRecord_InvalidDataClear delete reocrd:' + i);\r\n            _recordedChunksState.splice(i,1);\r\n            _recordedChunks.splice(i,1);\r\n        }\r\n    }\r\n    console.log('VideoRecord_InvalidDataClear current reocrd count:' + _recordedChunks.length);\r\n}\r\n\r\nexport function VideoRecordDelete(index) {\r\n    console.log('VideoRecordDelete index:'+index);\r\n    _recordedChunksState.splice(index,1);\r\n    _recordedChunks.splice(index,1);\r\n    _mediaRecorder = undefined;\r\n}\r\n\r\nexport function VideoRecordClear() {\r\n    console.log('VideoRecordClear');\r\n    _recordedChunksState = [];\r\n    _recordedChunks = [];\r\n    _mediaRecorder = undefined;\r\n}","export function SetIframeFinish(success) {\r\n    if (undefined == window) {\r\n        return;\r\n    }\r\n    if (undefined == window.parent) {\r\n        return;\r\n    }\r\n\r\n    if (success == false) {\r\n        window.parent.postMessage(\"onBack\", \"*\");\r\n    }\r\n    else {\r\n        window.parent.postMessage(\"onSuccess\", \"*\");\r\n    }\r\n}\r\n\r\nexport function SetIframeFullScreen(fullScreen) {\r\n    if (undefined == window) {\r\n        return;\r\n    }\r\n    if (undefined == window.parent) {\r\n        return;\r\n    }\r\n    \r\n    if (fullScreen == false) {\r\n        window.parent.postMessage(\"onFitScreen\", \"*\");\r\n    }\r\n    else {\r\n        window.parent.postMessage(\"onFullScreen\", \"*\");\r\n    }\r\n}\r\n\r\nexport function SetLandscapeMode(fullScreen) {\r\n    if (undefined == window) {\r\n        return;\r\n    }\r\n    if (undefined == window.HybridApp) {\r\n        return;\r\n    }\r\n    window.HybridApp.SetLandscapeMode(fullScreen);\r\n}\r\n\r\nexport function EnableScreenMirror() {\r\n    if (undefined == window) {\r\n        return;\r\n    }\r\n    if (undefined == window.HybridApp) {\r\n        return;\r\n    }\r\n    window.HybridApp.EnablingWiFiDisplay();\r\n}\r\n\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SetMaxTime, SetCurrentTime } from '../actions/countdown';\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\r\nimport { green } from '@material-ui/core/colors';\r\n\r\nimport { EnableScreenMirror } from './utils/SendMessage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%'\r\n    },\r\n    video: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        margin: '0'\r\n    },\r\n    rootFullScreen: {\r\n        position: 'fixed',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    videoFullScreen: {\r\n        position: 'absolute',\r\n        width: 'auto',\r\n        height: '100%',\r\n        left: '0%',\r\n        top: '0%',\r\n        margin: '0'\r\n    },\r\n    contentsTitle: {\r\n        position: 'absolute',\r\n        width: '100%',\r\n        left: '0%',\r\n        top: '0%',\r\n        fontSize: '250%',\r\n        textShadow: '2px 2px 5px black',\r\n        color: 'white',\r\n        textAlign: 'left',\r\n        margin: '1% 1%',\r\n        //backgroundColor: '#0000FF88',\r\n    },\r\n    contentBackBoard: {\r\n        position: 'absolute',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: '#00000088',\r\n        margin: '0'\r\n    },\r\n    skipGuide: {\r\n        position: 'absolute',\r\n        right: '1%',\r\n        top: '1%',\r\n        color: 'white',\r\n        //backgroundColor: '#FF000088',\r\n    },\r\n    centerPlayButton: {\r\n        position: 'absolute',\r\n        width: '50%',\r\n        height: '50%',\r\n        left: '25%',\r\n        top: '40%',\r\n        display: 'none',\r\n        opacity: '255'\r\n    },\r\n    contentsScreenMirror: {\r\n        position: 'absolute',\r\n        width: '15%',\r\n        height: '15%',\r\n        left: '70%',\r\n        top: '70%'\r\n    },\r\n    centerPlayButtonText: {\r\n        position: 'absolute',\r\n        width: '100%',\r\n        top: '70%',\r\n        left: '0',\r\n        fontSize: '60%',\r\n        margin: '5%',\r\n        color: 'white'\r\n    },\r\n    playButton: {\r\n        position: 'absolute',\r\n        width: '50%',\r\n        height: '50%',\r\n        left: '0%',\r\n        top: '40%',\r\n        //margin: 'auto',\r\n        display: 'none',\r\n        opacity: '255'\r\n    },\r\n    skipButton: {\r\n        position: 'absolute',\r\n        width: '50%',\r\n        height: '50%',\r\n        left: '50%',\r\n        top: '40%',\r\n        //margin: 'auto',\r\n        display: 'none'\r\n    },\r\n    largeIcon: {\r\n        fontSize: \"2em\",\r\n        color: green[50]\r\n    }\r\n}));\r\n\r\nvar _ContentsSkipGuide = '터치하여 정지/스킵 가능';\r\nexport const VideoPlay = ({ title, videoUrl, enableContentsSkip, enableCountDown, \r\n    enableContentsPause, onVideoPlayComplete, onVideoSkip, autoPlay, controls,\r\n    enableTitleText, SetMaxTime, SetCurrentTime, enableFullScreen, enableScreenMirror }) => {\r\n    //console.log('VideoPlay component start : ' + title);\r\n    const classes = useStyles();\r\n    const playButtonRef = useRef(null);\r\n    const skipButtonRef = useRef(null);\r\n    const videoRef = useRef(null);\r\n    const backboardRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        console.log('VideoPlay start:' + videoUrl);\r\n        showPauseButton(!autoPlay);\r\n        var id = undefined;\r\n        if (true == enableCountDown) {\r\n            id = setInterval(timer, 1000);\r\n        }\r\n        return () => {\r\n            if (undefined != id) {\r\n                clearInterval(id);\r\n            }\r\n            console.log('VideoPlay finish:' + videoUrl);\r\n        }\r\n    }, []);\r\n\r\n    function timer() {\r\n        const video = videoRef.current;\r\n        if (undefined == video) {\r\n            console.log('videoRef null');\r\n            return;\r\n        }\r\n        //var leftTime = video.duration - video.currentTime;\r\n        SetCurrentTime(parseInt(video.currentTime));\r\n        SetMaxTime(parseInt(video.duration));\r\n    }\r\n\r\n    const onVideoClick = () => {\r\n        console.log('onVideoClick call');\r\n        const video = videoRef.current;\r\n        if (undefined == video) {\r\n            console.log('videoRef null');\r\n            return;\r\n        }\r\n\r\n        if (enableContentsPause == false) {\r\n            if (undefined != video) {\r\n                video.play();\r\n            }\r\n            console.log('disable contents skip');\r\n            return;\r\n        }\r\n\r\n        if (video.paused) {\r\n            video.play();\r\n            showPauseButton(false);\r\n        } else {\r\n            video.pause();\r\n            showPauseButton(true);\r\n        }\r\n    }\r\n\r\n    const showPauseButton = (state) => {\r\n        var displayState = \"none\";\r\n        if (true == state) {\r\n            displayState = \"block\";\r\n        }\r\n        if (undefined != playButtonRef.current) {\r\n            playButtonRef.current.style.display = displayState;\r\n        }\r\n        if (undefined != skipButtonRef.current) {\r\n            skipButtonRef.current.style.display = displayState;\r\n        }\r\n        if (undefined != backboardRef.current) {\r\n            backboardRef.current.style.display = displayState;\r\n        }\r\n    }\r\n\r\n    const onVideoEnded = () => {\r\n        console.log('onVideoEnded call');\r\n        if (undefined != onVideoPlayComplete) {\r\n            onVideoPlayComplete();\r\n        }\r\n    }\r\n\r\n    const onPlayClick = () => {\r\n        console.log('onPlayClick call');\r\n        const video = videoRef.current;\r\n        if (undefined == video) {\r\n            console.log('video null');\r\n            return;\r\n        }\r\n        if (undefined != video) {\r\n            video.play();\r\n        }\r\n        showPauseButton(false);\r\n    }\r\n\r\n    const onSkipClick = () => {\r\n        console.log('onSkipClick call');\r\n        showPauseButton(false);\r\n        if (undefined != onVideoSkip) {\r\n            onVideoSkip();\r\n        }\r\n    }\r\n\r\n    const onScreenMirror = () => {\r\n        EnableScreenMirror();\r\n    }\r\n\r\n    const getPauseView = () => {\r\n        if (false == enableContentsPause) {\r\n            return undefined;\r\n        }\r\n        if (true == enableContentsSkip) {\r\n            return (\r\n                <div>\r\n                    <div className={classes.contentBackBoard} ref={backboardRef}></div>\r\n                    <span className={classes.skipGuide}>{_ContentsSkipGuide}</span>\r\n                    <div className={classes.playButton} ref={playButtonRef}>\r\n                        <IconButton aria-label=\"play\" onClick={onPlayClick} >\r\n                            <PlayArrowIcon className={classes.largeIcon} />\r\n                            <span className={classes.centerPlayButtonText}>재생</span>\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className={classes.skipButton} ref={skipButtonRef}>\r\n                        <IconButton aria-label=\"skip\" onClick={onSkipClick}>\r\n                            <SkipNextIcon className={classes.largeIcon} />\r\n                            <span className={classes.centerPlayButtonText}>다음</span>\r\n                        </IconButton>\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <div className={classes.contentBackBoard} ref={backboardRef}></div>\r\n                    <div className={classes.centerPlayButton} ref={playButtonRef}>\r\n                        <IconButton aria-label=\"play\" onClick={onPlayClick} >\r\n                            <PlayArrowIcon className={classes.largeIcon} ></PlayArrowIcon>\r\n                            <span className={classes.centerPlayButtonText}>재생</span>\r\n                        </IconButton>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    var rootClass = enableFullScreen == false ? classes.root : classes.rootFullScreen;\r\n    var videoClass = enableFullScreen == false ? classes.video : classes.videoFullScreen;\r\n\r\n    return (\r\n        <div className={rootClass} style={{ zIndex: '-2' }}>\r\n            <video className={videoClass} onClick={onVideoClick} autoPlay={autoPlay} onEnded={onVideoEnded}  ref={videoRef} controls={controls} playsinline >\r\n                <source src={videoUrl} type=\"video/mp4\" />\r\n                Your browser does not support the video tag.\r\n            </video>\r\n            {(enableTitleText == true) ?\r\n                <span className={classes.contentsTitle}>{title}</span> :\r\n                undefined}\r\n            {getPauseView()}\r\n            {(enableScreenMirror == true) ?\r\n                <img onClick={onScreenMirror} className={classes.contentsScreenMirror} src={process.env.PUBLIC_URL + '/img/screen-mirror-icon.png'} /> : undefined}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n});\r\nconst mapDispatchToProps = { SetMaxTime, SetCurrentTime };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VideoPlay);\r\n\r\n","export const SETMAXTIME = 'SETMAXTIME';\r\nexport function SetMaxTime(value) {\r\n    return {\r\n        type: SETMAXTIME,\r\n        _maxTime: value\r\n    };\r\n}\r\n\r\nexport const SETCURRENTTIME = 'SETCURRENTTIME';\r\nexport function SetCurrentTime(value) {\r\n    return {\r\n        type: SETCURRENTTIME,\r\n        _currentTime: value\r\n    };\r\n}\r\n\r\n","\r\nexport function Posenet_GetDegreeFormVec(vec) {\r\n    var pivotVec = {};\r\n    pivotVec.x = 0;\r\n    pivotVec.y = -1;\r\n\r\n    var cos = get_cos(pivotVec, vec);\r\n    var degree = parseInt(Math.acos(cos) * (180 / Math.PI));\r\n    if (vec.x < 0) {\r\n        degree += 180;\r\n    }\r\n    return degree;\r\n}\r\n\r\nexport function Posenet_GetDegreeFormVec2(vec1, vec2) {\r\n    var cos = get_cos(vec1, vec2);\r\n    var degree = parseInt(Math.acos(cos) * (180 / Math.PI));\r\n    return degree;  \r\n}\r\n\r\nexport function InBoundaryDegree(targetDegree, currentDegree, boundaryDegree) {\r\n    var diffDegree = Math.abs(currentDegree - targetDegree);\r\n    if (diffDegree <= boundaryDegree) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction abs_value(vec) {\r\n    var distance = Math.pow(vec.x - 0, 2) + Math.pow(vec.y - 0, 2);\r\n    return Math.sqrt(distance);\r\n}\r\n\r\nfunction get_cos(partA, partB) {\r\n    let dotProduct = ((partA.x * partB.x) + (partA.y * partB.y));\r\n    let cosineSimilarity = dotProduct / (abs_value(partA) * abs_value(partB));\r\n    return cosineSimilarity;\r\n}","import * as posenet from '@tensorflow-models/posenet'\r\nimport { Posenet_GetDegreeFormVec } from './data/PosenetMath'\r\n\r\nconst pointRadius = 3\r\n// var _reserveCameraClose = false;\r\n\r\n// export function IsReserveCameraClose() {\r\n//   return _reserveCameraClose;\r\n// }\r\n\r\n// export function SetReserveCameraClose(flag) {\r\n//   _reserveCameraClose = flag;\r\n// }\r\n\r\nexport const KEYPOINT_COLOR_NAMES = [\r\n  \"AliceBlue\",\r\n  \"AntiqueWhite\",\r\n  \"Aqua\",\r\n  \"Aquamarine\",\r\n  \"Azure\",\r\n  \"Beige\",\r\n  \"Bisque\",\r\n  \"Black\",\r\n  \"BlanchedAlmond\",\r\n  \"Blue\",\r\n  \"BlueViolet\",\r\n  \"Brown\",\r\n  \"BurlyWood\",\r\n  \"CadetBlue\",\r\n  \"Chartreuse\",\r\n  \"Chocolate\",\r\n  \"Coral\",\r\n  \"CornflowerBlue\",\r\n  \"Cornsilk\",\r\n  \"Crimson\",\r\n  \"Cyan\",\r\n  \"DarkBlue\",\r\n  \"DarkCyan\",\r\n  \"DarkGoldenRod\",\r\n  \"DarkGray\",\r\n  \"DarkGrey\",\r\n  \"DarkGreen\",\r\n  \"DarkKhaki\",\r\n  \"DarkMagenta\",\r\n  \"DarkOliveGreen\",\r\n  \"DarkOrange\",\r\n  \"DarkOrchid\",\r\n  \"DarkRed\",\r\n  \"DarkSalmon\",\r\n  \"DarkSeaGreen\",\r\n  \"DarkSlateBlue\",\r\n  \"DarkSlateGray\",\r\n  \"DarkSlateGrey\",\r\n  \"DarkTurquoise\",\r\n  \"DarkViolet\",\r\n  \"DeepPink\",\r\n  \"DeepSkyBlue\",\r\n  \"DimGray\",\r\n  \"DimGrey\",\r\n  \"DodgerBlue\",\r\n  \"FireBrick\",\r\n  \"FloralWhite\",\r\n  \"ForestGreen\",\r\n  \"Fuchsia\",\r\n  \"Gainsboro\",\r\n  \"GhostWhite\",\r\n  \"Gold\",\r\n  \"GoldenRod\",\r\n  \"Gray\",\r\n  \"Grey\",\r\n  \"Green\",\r\n  \"GreenYellow\",\r\n  \"HoneyDew\",\r\n  \"HotPink\",\r\n  \"IndianRed\",\r\n  \"Indigo\",\r\n  \"Ivory\",\r\n  \"Khaki\",\r\n  \"Lavender\",\r\n  \"LavenderBlush\",\r\n  \"LawnGreen\",\r\n  \"LemonChiffon\",\r\n  \"LightBlue\",\r\n  \"LightCoral\",\r\n  \"LightCyan\",\r\n  \"LightGoldenRodYellow\",\r\n  \"LightGray\",\r\n  \"LightGrey\",\r\n  \"LightGreen\",\r\n  \"LightPink\",\r\n  \"LightSalmon\",\r\n  \"LightSeaGreen\",\r\n  \"LightSkyBlue\",\r\n  \"LightSlateGray\",\r\n  \"LightSlateGrey\",\r\n  \"LightSteelBlue\",\r\n  \"LightYellow\",\r\n  \"Lime\",\r\n  \"LimeGreen\",\r\n  \"Linen\",\r\n  \"Magenta\",\r\n  \"Maroon\",\r\n  \"MediumAquaMarine\",\r\n  \"MediumBlue\",\r\n  \"MediumOrchid\",\r\n  \"MediumPurple\",\r\n  \"MediumSeaGreen\",\r\n  \"MediumSlateBlue\",\r\n  \"MediumSpringGreen\",\r\n  \"MediumTurquoise\",\r\n  \"MediumVioletRed\",\r\n  \"MidnightBlue\",\r\n  \"MintCream\",\r\n  \"MistyRose\",\r\n  \"Moccasin\",\r\n  \"NavajoWhite\",\r\n  \"Navy\",\r\n  \"OldLace\",\r\n  \"Olive\",\r\n  \"OliveDrab\",\r\n  \"Orange\",\r\n  \"OrangeRed\",\r\n  \"Orchid\",\r\n  \"PaleGoldenRod\",\r\n  \"PaleGreen\",\r\n  \"PaleTurquoise\",\r\n  \"PaleVioletRed\",\r\n  \"PapayaWhip\",\r\n  \"PeachPuff\",\r\n  \"Peru\",\r\n  \"Pink\",\r\n  \"Plum\",\r\n  \"PowderBlue\",\r\n  \"Purple\",\r\n  \"RebeccaPurple\",\r\n  \"Red\",\r\n  \"RosyBrown\",\r\n  \"RoyalBlue\",\r\n  \"SaddleBrown\",\r\n  \"Salmon\",\r\n  \"SandyBrown\",\r\n  \"SeaGreen\",\r\n  \"SeaShell\",\r\n  \"Sienna\",\r\n  \"Silver\",\r\n  \"SkyBlue\",\r\n  \"SlateBlue\",\r\n  \"SlateGray\",\r\n  \"SlateGrey\",\r\n  \"Snow\",\r\n  \"SpringGreen\",\r\n  \"SteelBlue\",\r\n  \"Tan\",\r\n  \"Teal\",\r\n  \"Thistle\",\r\n  \"Tomato\",\r\n  \"Turquoise\",\r\n  \"Violet\",\r\n  \"Wheat\",\r\n  \"White\",\r\n  \"WhiteSmoke\",\r\n  \"Yellow\",\r\n  \"YellowGreen\",\r\n];\r\n\r\nexport const config = {\r\n  videoWidth: 900,\r\n  videoHeight: 700,\r\n  flipHorizontal: true,\r\n  algorithm: 'single-pose',\r\n  showVideo: true,\r\n  showSkeleton: true,\r\n  showPoints: true,\r\n  minPoseConfidence: 0.1,\r\n  minPartConfidence: 0.5,\r\n  maxPoseDetections: 2,\r\n  nmsRadius: 20,\r\n  outputStride: 16,\r\n  imageScaleFactor: 0.5,\r\n  skeletonColor: '#ffadea',\r\n  skeletonLineWidth: 6,\r\n  loadingText: 'Loading...please be patient...'\r\n}\r\n\r\nfunction isAndroid() {\r\n  return /Android/i.test(navigator.userAgent);\r\n}\r\n\r\nfunction isiOS() {\r\n  return /iPhone|iPad|iPod/i.test(navigator.userAgent);\r\n}\r\n\r\nexport function isMobile() {\r\n  return isAndroid() || isiOS();\r\n}\r\n\r\nfunction toTuple({x, y}) {\r\n  return [x, y]\r\n}\r\n\r\nexport function drawKeyPoints(\r\n  keypoints,\r\n  minConfidence,\r\n  skeletonColor,\r\n  canvasContext,\r\n  scale = 1\r\n) {\r\n  keypoints.forEach(keypoint => {\r\n    if (keypoint.score >= minConfidence) {\r\n      const {x, y} = keypoint.position\r\n      canvasContext.beginPath()\r\n      canvasContext.arc(x * scale, y * scale, pointRadius, 0, 2 * Math.PI)\r\n      canvasContext.fillStyle = skeletonColor\r\n      canvasContext.fill()\r\n    }\r\n  })\r\n}\r\n\r\nfunction drawLine(startX, startY, endX, endY, canvasContext) {\r\n  canvasContext.moveTo(startX, startY)\r\n  canvasContext.lineTo(endX, endY)\r\n\r\n  var headlen = 10;\r\n  var dx = endX - startX;\r\n  var dy = endY - startY;\r\n  var angle = Math.atan2(dy, dx);\r\n  canvasContext.moveTo(endX, endY)\r\n  canvasContext.lineTo(endX - headlen * Math.cos(angle - Math.PI / 6), endY - headlen * Math.sin(angle - Math.PI / 6))\r\n\r\n  canvasContext.moveTo(endX, endY)\r\n  canvasContext.lineTo(endX - headlen * Math.cos(angle + Math.PI / 6), endY - headlen * Math.sin(angle + Math.PI / 6))\r\n}\r\n\r\nfunction drawSegment(\r\n  [firstX, firstY],\r\n  [nextX, nextY],\r\n  color,\r\n  lineWidth,\r\n  scale,\r\n  canvasContext\r\n) {\r\n  canvasContext.beginPath()\r\n\r\n  drawLine(firstX * scale, firstY * scale, nextX * scale, nextY * scale, canvasContext)\r\n\r\n  canvasContext.lineWidth = lineWidth\r\n  canvasContext.strokeStyle = color\r\n  canvasContext.stroke()\r\n}\r\n\r\nexport function drawSkeleton(\r\n  keypoints,\r\n  minConfidence,\r\n  color,\r\n  lineWidth,\r\n  canvasContext,\r\n  scale = 1\r\n) {\r\n  const adjacentKeyPoints = posenet.getAdjacentKeyPoints(\r\n    keypoints,\r\n    minConfidence\r\n  )\r\n\r\n  adjacentKeyPoints.forEach(keypoints => {\r\n    drawSegment(\r\n      toTuple(keypoints[0].position),\r\n      toTuple(keypoints[1].position),\r\n      color,\r\n      lineWidth,\r\n      scale,\r\n      canvasContext\r\n    )\r\n  })\r\n}\r\n\r\nfunction drawDegree(\r\n  [firstX, firstY],\r\n  [nextX, nextY],\r\n  color,\r\n  canvasContext\r\n) {\r\n\r\n  canvasContext.font = \"20px Arial\";\r\n  canvasContext.fillStyle = color;\r\n  canvasContext.textAlign = \"center\";\r\n\r\n  var skelectonDir = {};\r\n  skelectonDir.x = nextX - firstX;\r\n  skelectonDir.y = nextY - firstY;\r\n\r\n  var current_angle = Posenet_GetDegreeFormVec(skelectonDir);\r\n\r\n  var posX = (firstX + nextX) / 2;\r\n  var posY = (firstY + nextY) / 2;\r\n  canvasContext.fillText(\"(\" + current_angle + \")\", posX, posY);\r\n\r\n  // canvasContext.beginPath()\r\n  // canvasContext.moveTo(firstX * scale, firstY * scale)\r\n  // canvasContext.lineTo(nextX * scale, nextY * scale)\r\n  // canvasContext.lineWidth = lineWidth\r\n  // canvasContext.strokeStyle = color\r\n  // canvasContext.stroke()\r\n}\r\n\r\nexport function drawSkeletonDegree(\r\n  keypoints,\r\n  minConfidence,\r\n  color,\r\n  lineWidth,\r\n  canvasContext,\r\n  scale = 1\r\n) {\r\n  const adjacentKeyPoints = posenet.getAdjacentKeyPoints(\r\n    keypoints,\r\n    minConfidence\r\n  )\r\n\r\n  adjacentKeyPoints.forEach(keypoints => {\r\n    drawDegree(\r\n      toTuple(keypoints[0].position),\r\n      toTuple(keypoints[1].position),\r\n      color,\r\n      lineWidth,\r\n      scale,\r\n      canvasContext\r\n    )\r\n  })\r\n}\r\n","var _canvasLastCalledTime;\r\nvar _canvasFPS;\r\nvar _canvasFPSCount = 0;\r\nvar _canvasTextColor = 'yellow';\r\nvar _canvasTextSize = 32;\r\n\r\nexport function CanvasFPS_Update() {\r\n    if (!_canvasLastCalledTime) {\r\n        _canvasLastCalledTime = Date.now();\r\n        _canvasFPS = 0;\r\n        _canvasFPSCount = 0;\r\n        return;\r\n    }\r\n    var delta = (Date.now() - _canvasLastCalledTime) / 1000;\r\n    if (delta >= 1) {\r\n        _canvasLastCalledTime = Date.now();\r\n        _canvasFPS = _canvasFPSCount;\r\n        _canvasFPSCount = 0;\r\n    }\r\n    else {\r\n        _canvasFPSCount++;\r\n    }\r\n}\r\n\r\nexport function CanvasFPS_FontColor(rgb) {\r\n    _canvasTextColor = rgb;\r\n}\r\n\r\nexport function CanvasFPS_FontSize(size) {\r\n    _canvasTextSize = size;\r\n}\r\n\r\nexport function CanvasFPS_Render(canvasContext) {\r\n    canvasContext.fillStyle = _canvasTextColor;\r\n    canvasContext.font = _canvasTextSize + \"px Arial\";\r\n    canvasContext.fillText(_canvasFPS, 10, _canvasTextSize+10);\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport clsx from 'clsx';\r\n\r\nimport * as posenet from '@tensorflow-models/posenet'\r\nimport { drawKeyPoints, drawSkeleton, drawSkeletonDegree } from './PosenetUtils'\r\nimport { CanvasFPS_Update, CanvasFPS_Render } from './../utils/CanvasFPS'\r\nimport { SetPosenetPose, ClosePosenet } from '../../actions/posenet'\r\n\r\nconst _miniVideoAreaBase = {\r\n  zIndex: '0',\r\n  position: 'fixed',\r\n  right: '0%',\r\n  bottom: '0%',\r\n  width: '30%',\r\n}\r\nconst _miniVideoArea = {\r\n  height: '30%'\r\n}\r\nconst _miniVideoTextArea = {\r\n  height: '30%'\r\n}\r\n\r\nconst _fullVideoAreaBase = {\r\n  zIndex: '0',\r\n  position: 'fixed',\r\n  left: '0%',\r\n  top: '0%',\r\n  width: '100%'\r\n}\r\nconst _fullVideoArea = {\r\n  height: 'auto'\r\n}\r\nconst _fullVideoTextArea = {\r\n  height: '100%'\r\n}\r\n\r\nconst contentsTextBase = {\r\n  position: 'absolute',\r\n  zIndex: '1',\r\n  left: '0%',\r\n  top: '0%',\r\n  width: '100%',\r\n  height: '100%',\r\n  margin: '0 auto',\r\n  textShadow: '2px 2px 5px black',\r\n  color: 'white',\r\n}\r\nconst _contentsLoading = {\r\n  textAlign: 'left',\r\n  fontSize: '150%',\r\n  //backgroundColor: '#FF000088',\r\n}\r\n\r\nconst _miniContentsLoading = {\r\n  textAlign: 'center',\r\n  fontSize: '80%',\r\n  //backgroundColor: '#FF000088',\r\n}\r\n\r\nconst _contentsScaning = {\r\n  textAlign: 'right',\r\n  fontSize: '130%',\r\n  //backgroundColor: '#0000FF88',\r\n}\r\n\r\nconst _miniContentsScaning = {\r\n  textAlign: 'center',\r\n  fontSize: '80%',\r\n  //backgroundColor: '#0000FF88',\r\n}\r\n\r\n// 최적화로 이미 종료 되었지만 이미지 Pose 체크를 하는 경우를 위해서 flag 추가\r\nvar _distroyComponent = false;\r\nclass PoseNetCamera extends Component {\r\n  static defaultProps = {\r\n    flipHorizontal: true,\r\n    algorithm: 'single-pose',\r\n    showMiniVideo: false,\r\n    showVideo: true,\r\n    showDebugVideo: false,\r\n    showSkeleton: false,\r\n    showPoints: false,\r\n    showSkeletonDegree: false,\r\n    minPoseConfidence: 0.7,\r\n    minPartConfidence: 0.5,\r\n    maxPoseDetections: 2,\r\n    nmsRadius: 20,\r\n    outputStride: 16,\r\n    imageScaleFactor: 0.5,\r\n    skeletonColor: '#ffadea',\r\n    skeletonDegreeColor: '#ff0000',\r\n    skeletonLineWidth: 6,\r\n    loadingText: 'Loading...please be patient...'\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props, PoseNetCamera.defaultProps);\r\n    this.stopCamera = this.stopCamera.bind(this);\r\n    console.log('PoseNetCamera init');\r\n  }\r\n\r\n  getCanvas = elem => {\r\n    this.canvas = elem\r\n  }\r\n\r\n  getVideo = elem => {\r\n    this.video = elem;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    _distroyComponent = false;\r\n    try {\r\n      await this.setupCamera()\r\n    } catch (error) {\r\n      throw new Error(\r\n        'This browser does not support video capture, or this device does not have a camera'\r\n      )\r\n    }\r\n\r\n    try {\r\n      this.posenet = await posenet.load()\r\n    } catch (error) {\r\n      throw new Error('PoseNetCamera failed to load')\r\n    } finally {\r\n      setTimeout(() => {\r\n        this.setState({ loading: false })\r\n      }, 200)\r\n    }\r\n    this.detectPose();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    _distroyComponent = true;\r\n    console.log('PoseNetCamera componentWillUnmount');\r\n    this.stopCamera();\r\n  }\r\n\r\n  async setupCamera() {\r\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n      throw new Error(\r\n        'Browser API navigator.mediaDevices.getUserMedia not available'\r\n      )\r\n    }\r\n    // const {showVideo } = this.props\r\n    const video = this.video;\r\n    // if (false == showVideo) {\r\n    //   video.style.display = \"none\";\r\n    // }\r\n\r\n    video.style.display = \"none\";\r\n    video.style.transform = 'rotatey(180deg)';\r\n\r\n    var screenWidth = window.innerWidth;\r\n    var screenHeight = window.innerHeight;\r\n\r\n    const stream = await navigator.mediaDevices.getUserMedia({\r\n      audio: false,\r\n      video: {\r\n        facingMode: 'user',\r\n        width: screenWidth,\r\n        height: screenHeight\r\n      }\r\n    })\r\n\r\n    video.srcObject = stream;\r\n    return new Promise(resolve => {\r\n      video.onloadedmetadata = () => {\r\n        video.play()\r\n        resolve(video)\r\n      }\r\n    })\r\n  }\r\n\r\n  stopCamera() {\r\n    console.log('stopCamera call');\r\n    const video = this.video;\r\n    //console.log(video);\r\n    if (undefined == video) {\r\n      return;\r\n    }\r\n    video.pause();\r\n    video.src = \"\";\r\n    if (undefined != video.srcObject) {\r\n      //video.srcObject.stop();\r\n      video.srcObject.getTracks()[0].stop();\r\n      video.srcObject = undefined;\r\n    }\r\n    console.log(\"video off\");\r\n  }\r\n\r\n  detectPose() {\r\n    const canvas = this.canvas\r\n    if (undefined == canvas) {\r\n      return;\r\n    }\r\n    const canvasContext = canvas.getContext('2d')\r\n    if (undefined == canvasContext) {\r\n      return;\r\n    }\r\n\r\n    const { showVideo } = this.props;\r\n    const video = this.video;\r\n    if (false == showVideo) {\r\n      video.style.display = \"none\";\r\n    }\r\n    else {\r\n      video.style.display = \"block\";\r\n    }\r\n\r\n    this.poseDetectionFrame(canvasContext)\r\n  }\r\n\r\n  poseDetectionFrame(canvasContext) {\r\n    const {\r\n      algorithm,\r\n      imageScaleFactor,\r\n      flipHorizontal,\r\n      outputStride,\r\n      minPoseConfidence,\r\n      minPartConfidence,\r\n      maxPoseDetections,\r\n      nmsRadius,\r\n      showDebugVideo,\r\n      showPoints,\r\n      showSkeleton,\r\n      showSkeletonDegree,\r\n      skeletonColor,\r\n      skeletonDegreeColor,\r\n      skeletonLineWidth\r\n    } = this.props\r\n\r\n    const posenetModel = this.posenet\r\n    const video = this.video\r\n\r\n    const findPoseDetectionFrame = async () => {\r\n\r\n      if (_distroyComponent == true) {\r\n        return;\r\n      }\r\n      try {\r\n        let poses = []\r\n        switch (algorithm) {\r\n          case 'multi-pose': {\r\n            poses = await posenetModel.estimateMultiplePoses(\r\n              video,\r\n              imageScaleFactor,\r\n              flipHorizontal,\r\n              outputStride,\r\n              maxPoseDetections,\r\n              minPartConfidence,\r\n              nmsRadius\r\n            )\r\n            break\r\n          }\r\n          case 'single-pose': {\r\n            const pose = await posenetModel.estimateSinglePose(\r\n              video,\r\n              imageScaleFactor,\r\n              flipHorizontal,\r\n              outputStride\r\n            )\r\n            //SetPoseData(pose);\r\n            this.props.onPosenetPose(pose);\r\n            poses.push(pose)\r\n            break\r\n          }\r\n        }\r\n\r\n        const canvas = this.canvas;\r\n        if (true == showDebugVideo && undefined != canvas) {\r\n          // \r\n          canvasContext.clearRect(0, 0, canvas.width, canvas.height)\r\n          CanvasFPS_Update();\r\n          canvasContext.save();\r\n          canvasContext.scale(-1, 1)\r\n          canvasContext.translate(-canvas.width, 0)\r\n          canvasContext.drawImage(video, video.left, video.top, video.left + canvas.width / 2, video.top + canvas.height)\r\n\r\n          poses.forEach(({ score, keypoints }) => {\r\n            if (score >= minPoseConfidence) {\r\n              if (showPoints) {\r\n                drawKeyPoints(\r\n                  keypoints,\r\n                  minPartConfidence,\r\n                  skeletonColor,\r\n                  canvasContext\r\n                )\r\n              }\r\n\r\n              if (showSkeleton) {\r\n                drawSkeleton(\r\n                  keypoints,\r\n                  minPartConfidence,\r\n                  skeletonColor,\r\n                  skeletonLineWidth,\r\n                  canvasContext\r\n                )\r\n              }\r\n\r\n              if (showSkeletonDegree) {\r\n                drawSkeletonDegree(\r\n                  keypoints,\r\n                  minPartConfidence,\r\n                  skeletonDegreeColor,\r\n                  canvasContext\r\n                )\r\n              }\r\n            }\r\n          })\r\n          canvasContext.restore();\r\n          CanvasFPS_Render(canvasContext);\r\n        }\r\n      } catch (error) {\r\n        console.log('posenet detection error');\r\n        // throw new Error(\r\n        //   'This browser does not support video capture, or this device does not have a camera'\r\n        // )\r\n      }\r\n\r\n      setTimeout(function () {\r\n        requestAnimationFrame(findPoseDetectionFrame);\r\n      }, 1000);\r\n\r\n      //requestAnimationFrame(findPoseDetectionFrame)\r\n    }\r\n    findPoseDetectionFrame()\r\n  }\r\n\r\n  getCameraScan = () => {\r\n    var textStyle;\r\n    if (true == this.props.showMiniVideo) {\r\n      textStyle = Object.assign({}, contentsTextBase, _miniContentsLoading);\r\n    } else {\r\n      textStyle = Object.assign({}, contentsTextBase, _contentsLoading);\r\n    }\r\n\r\n    if (undefined != this.props._posenetPose) {\r\n      return (undefined);\r\n    }\r\n    return (\r\n      <span style={textStyle}>카메라 인식 중...</span>\r\n    )\r\n  }\r\n\r\n  getCameraInvalid = () => {\r\n    if (undefined == this.props._posenetPose) {\r\n      return undefined;\r\n    }\r\n    if (this.props.minPoseConfidence < this.props._posenetPose.score) {\r\n      return undefined;\r\n    }\r\n\r\n    var textStyle;\r\n    if (true == this.props.showMiniVideo) {\r\n      textStyle = Object.assign({}, contentsTextBase, _miniContentsScaning);\r\n    } else {\r\n      textStyle = Object.assign({}, contentsTextBase, _contentsScaning);\r\n    }\r\n\r\n    return (\r\n      <span style={textStyle}>화면 안으로 들어오세요.</span>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    var videoStyle;\r\n    var videoTextStyle;\r\n    if (true == this.props.showMiniVideo) {\r\n      videoStyle = Object.assign({}, _miniVideoAreaBase, _miniVideoArea);\r\n      videoTextStyle = Object.assign({}, _miniVideoAreaBase, _miniVideoTextArea);\r\n    } else {\r\n      videoStyle = Object.assign({}, _fullVideoAreaBase, _fullVideoArea);\r\n      videoTextStyle = Object.assign({}, _fullVideoAreaBase, _fullVideoTextArea);\r\n    }\r\n\r\n    return (\r\n      <div >\r\n        <video id='videoCamera' style={videoStyle} src=\"\" playsInline ref={this.getVideo} />\r\n        <div style={videoTextStyle}>\r\n          {/* {this.getCameraScan()} */}\r\n          {this.getCameraInvalid()}\r\n        </div>\r\n        <canvas style={{ position: 'fixed', left: '0%', top: '0%', zIndex: '1' }} ref={this.getCanvas} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    _currentScene: state.scene._currentScene,\r\n    _closePosenet: state.posenet._closePosenet,\r\n    _posenetPose: state.posenet._posenetPose,\r\n  };\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onPosenetPose: (poseData) => dispatch(SetPosenetPose(poseData)),\r\n    onClosePosenet: (state) => dispatch(ClosePosenet(state))\r\n  }\r\n}\r\n\r\nPoseNetCamera = connect(mapStateToProps, mapDispatchToProps)(PoseNetCamera);\r\n\r\nexport default PoseNetCamera;\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setScene } from '../../actions/scene';\r\n\r\nconst contentsLoading = {\r\n    position: 'absolute',\r\n    zIndex: '1',\r\n    left: '0%',\r\n    top: '0%',\r\n    width: '100%',\r\n    height: '100%',\r\n    textAlign : 'left',\r\n    margin: '0 auto',\r\n    fontSize: '150%',\r\n    textShadow: '2px 2px 5px black',\r\n    color: 'white',\r\n    //backgroundColor: '#FF000088',\r\n}\r\n\r\nconst contentsScaning = {\r\n    position: 'absolute',\r\n    zIndex: '1',\r\n    left: '0%',\r\n    top: '0%',\r\n    width: '100%',\r\n    height: '100%',\r\n    textAlign : 'right',\r\n    margin: '0 auto',\r\n    fontSize: '130%',\r\n    textShadow: '2px 2px 5px black',\r\n    color: 'white',\r\n    //backgroundColor: '#0000FF88',\r\n}\r\n\r\nconst root = {\r\n    position: 'fixed',\r\n    zIndex: '1',\r\n    left: '0%',\r\n    top: '0%',\r\n    width: '100%',\r\n    height: '100%',\r\n    //backgroundColor: '#0000FF88',\r\n}\r\n\r\nexport const PosenetPoseScan = ({ setScene, _posenetPose, _countdown, minPoseConfidence }) => {\r\n    useEffect(() => {\r\n        //console.log('game countdowntime:' + _countdown);\r\n    });\r\n    const getCameraScan = () => {\r\n        return (\r\n            <span style={contentsLoading}>카메라 인식 중...</span>\r\n        )\r\n    }\r\n    const getCameraInvalid = () => {\r\n        if (undefined == _posenetPose) {\r\n            return undefined;\r\n        }\r\n        if (minPoseConfidence < _posenetPose.score) {\r\n            return undefined;\r\n        }\r\n        return (\r\n            <span style={contentsScaning}>화면 안으로 들어오세요.</span>\r\n        )\r\n    }\r\n    return (\r\n    <div style={root}>\r\n        {getCameraScan()}\r\n        {getCameraInvalid()}\r\n    </div>);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    _posenetPose: state.posenet._posenetPose,\r\n    _countdown: state.countdown._countdown\r\n});\r\nconst mapDispatchToProps = { setScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PosenetPoseScan);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport PoseNetCamera from '../components/posenet/PosenetCamera'\r\nimport PosenetPoseScan from '../components/PoseNetGame/PosenetPoseScan'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SetSubScene } from '../actions/scene';\r\nimport { InvalidPosenet, ValidPosenet, ClosePosenet } from '../actions/posenet';\r\n\r\nimport { VideoRecord_Start, VideoRecord_Pause, VideoRecord_Stop, ValidVideoRecord, VideoRecord_Download, GetVideoRecordCount} from './../components/utils/VideoRecord'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        maxHeight: '100%',\r\n    },\r\n    contentsTitle: {\r\n        position: 'absolute',\r\n        left: '5%',\r\n        top: '5%',\r\n        fontSize: '250%',\r\n        textShadow: '2px 2px 5px black',\r\n        color: 'red'\r\n    },\r\n    contentsResult: {\r\n        position: 'fixed',\r\n        left: '0%',\r\n        top: '10%',\r\n        width: '100%',\r\n        height: 'auto',\r\n        fontSize: '250%',\r\n        textShadow: '2px 2px 5px black',\r\n        textAlign: 'center',\r\n        color: 'white'\r\n    }\r\n}));\r\n\r\nvar _poseValidPercent = 50;\r\nvar _minPoseConfidence = 0.3;\r\nvar _poseDetectionInvalidCount = 0;\r\nvar _poseDetectionValidCount = 0;\r\nvar _step = undefined;\r\nvar _title = undefined;\r\nvar _desc = undefined;\r\nexport const PoseCameraRecord = ({ SetSubScene, _currentSubScene, InvalidPosenet, ValidPosenet, _invalidPosenetList, _validPosenetList, _posenetPose, step, title, desc, _recordState }) => {\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        if (undefined != _posenetPose) {\r\n            //console.log('pose score valid count:' + _poseDetectionValidCount + \", invalid count:\" + _poseDetectionInvalidCount);\r\n            if (_minPoseConfidence < _posenetPose.score) {\r\n                _poseDetectionValidCount++;\r\n            }\r\n            else {\r\n                _poseDetectionInvalidCount++;\r\n            }\r\n            // 카메라 로딩이 느려 주기적인 체크 필요\r\n            console.log('PoseCameraRecord _recordState:' + _recordState);\r\n            if (_recordState == true) {\r\n                startVideoRecord();\r\n            } else {\r\n                stopVideoRecord();\r\n            }\r\n        }\r\n    }, [_posenetPose]);\r\n\r\n    useEffect(() => {\r\n        console.log('PoseCameraRecord start:' + step);\r\n        _poseDetectionInvalidCount = 0;\r\n        _poseDetectionValidCount = 0;\r\n        _step = step;\r\n        _title = title;\r\n        _desc = desc;\r\n        return () => {\r\n            stopVideoRecord();\r\n        }\r\n    }, []);\r\n\r\n    const startVideoRecord = () => {\r\n        var videoElement = document.getElementById('videoCamera');\r\n        if (undefined != videoElement) {\r\n            VideoRecord_Start(videoElement.srcObject);\r\n        }\r\n    }\r\n\r\n    const stopVideoRecord = () => {\r\n        console.log(' stopVideoRecord call');\r\n        if (ValidVideoRecord() == false) {\r\n            return;\r\n        }\r\n        var currentPercent = 0;\r\n        var totalCount = _poseDetectionValidCount + _poseDetectionInvalidCount;\r\n        if (totalCount != 0) {\r\n            currentPercent = _poseDetectionValidCount * 100 / (_poseDetectionValidCount + _poseDetectionInvalidCount);\r\n        }\r\n        console.log('percent:' + currentPercent + ', total:' + totalCount);\r\n        var validState = (_poseValidPercent < currentPercent);\r\n        if (false == validState) {\r\n            InvalidPosenet(step);\r\n        } else {\r\n            ValidPosenet(step);\r\n        }\r\n        VideoRecord_Stop(validState, _step, _title, _desc);\r\n    }\r\n\r\n    const getResultText = () => {\r\n        if (_recordState == false) {\r\n            console.log(_validPosenetList);\r\n            console.log(_invalidPosenetList);\r\n\r\n            for (var i = 0; i < _validPosenetList.length; i++) {\r\n                var value = _validPosenetList[i];\r\n                if (_step == value) {\r\n                    return (\r\n                        <span className={classes.contentsResult}>기록 성공</span>\r\n                    );\r\n                }\r\n            }\r\n            for (var i = 0; i < _invalidPosenetList.length; i++) {\r\n                var value = _invalidPosenetList[i];\r\n                if (_step == value) {\r\n                    return (\r\n                        <span className={classes.contentsResult}>기록 실패</span>\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    return (\r\n        <div key=\"PoseNetMiniCamera\">\r\n            <PoseNetCamera showMiniVideo={true} minPoseConfidence='0.1'>\r\n                {/* <PosenetPoseScan minPoseConfidence={_minPoseConfidence} /> */}\r\n            </PoseNetCamera>\r\n            {getResultText()}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    _posenetPose: state.posenet._posenetPose,\r\n    _currentSubScene: state.scene._currentSubScene,\r\n    _recordState: state.posenet._recordState,\r\n    _invalidPosenetList: state.posenet._invalidPosenetList,\r\n    _validPosenetList: state.posenet._validPosenetList\r\n});\r\nconst mapDispatchToProps = { SetSubScene, InvalidPosenet, ValidPosenet, ClosePosenet };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PoseCameraRecord);\r\n","\r\nexport var _contents = {\r\n    \"step1\" : {\r\n      'title': '코어-복근 15분',\r\n      'desc': '코어-복근 15분',\r\n      'type': 'extra',\r\n      'url' : 'https://goli8111.github.io/home-training/data/intro.mp4',\r\n      'enableContentsPause' : true,\r\n      'enablePlayerView' : false,\r\n      'key' : 'intro'\r\n    },\r\n    \"step2\" : {\r\n      'title' : '마운틴 클라이머',\r\n      'desc': '워밍업:마운틴 클라이머 40초',\r\n      'type': 'extra',\r\n      'url' : 'https://goli8111.github.io/home-training/data/mountain-climber-intro.mp4',\r\n      //'url' : 'https://play.bellaco.se/Content/video.mp4',\r\n      'enableContentsPause' : true,\r\n      'enablePlayerView' : false,\r\n      'key' : 'mountain-climber'\r\n    },\r\n    \"step3\" : {\r\n      'title' : '마운틴 클라이머(set)',\r\n      'desc': '워밍업:마운틴 클라이머 40초',\r\n      'type': 'set',\r\n      'url' : 'https://goli8111.github.io/home-training/data/mountain-climber-set.mp4',\r\n      //'url' : 'https://play.bellaco.se/Content/video.mp4',\r\n      'enableContentsPause' : false,\r\n      'enablePlayerView' : true,\r\n      'key' : 'mountain-climber'\r\n    },\r\n    \"step4\" : {\r\n      'title' : '플랭크 인 앤 아웃',\r\n      'desc': '플랭크 인 앤 아웃 30초 X 1 set',\r\n      'type': 'extra',\r\n      'url' : 'https://goli8111.github.io/home-training/data/plank-in-and-out-intro.mp4',\r\n      'enableContentsPause' : true,\r\n      'enablePlayerView' : false,\r\n      'key' : 'plank-in-and-out'\r\n    },\r\n    \"step5\" : {\r\n      'title' : '플랭크 인 앤 아웃(set)',\r\n      'desc': '플랭크 인 앤 아웃 30초 X 1 set',\r\n      'type': 'set',\r\n      'url' : 'https://goli8111.github.io/home-training/data/plank-in-and-out-set.mp4',\r\n      'enableContentsPause' : false,\r\n      'enablePlayerView' : true,\r\n      'key' : 'plank-in-and-out'\r\n    },\r\n  \r\n    \"step6\" : {\r\n      'title' : '할로우바디 킥',\r\n      'desc': '할로우바디 킥 30초 X 1 set',\r\n      'type': 'extra',\r\n      'url' : 'https://goli8111.github.io/home-training/data/hollow-body-kick-intro-1.mp4',\r\n      //'url' : 'https://play.bellaco.se/Content/video.mp4',\r\n      'enableContentsPause' : true,\r\n      'enablePlayerView' : false,\r\n      'key' : 'hollow-body-kick'\r\n    },\r\n    \"step7\" : {\r\n      'title' : '할로우바디 킥 Set#1',\r\n      'desc': '할로우바디 킥 30초 X 1 set',\r\n      'type': 'set',\r\n      'url' : 'https://goli8111.github.io/home-training/data/hollow-body-kick-set-1.mp4',\r\n      //'url' : 'https://play.bellaco.se/Content/video.mp4',\r\n      //'enableContentsPause' : false,\r\n      'enableContentsPause' : true,\r\n      'enablePlayerView' : true,\r\n      'key' : 'hollow-body-kick'\r\n    },\r\n    \"step8\" : {\r\n      'title' : '할로우바디 킥(휴식)',\r\n      'desc': '할로우바디 킥 30초 후 휴식',\r\n      'type': 'extra',\r\n      'url' : 'https://goli8111.github.io/home-training/data/hollow-body-kick-intro-2.mp4',\r\n      'enableContentsPause' : true,\r\n      'enablePlayerView' : false,\r\n      'key' : 'hollow-body-kick'\r\n    },\r\n    \"step9\" : {\r\n      'title' : '할로우바디 킥 Set#2',\r\n      'desc': '할로우바디 킥 30초 X 2 set',\r\n      'type': 'set',\r\n      //'url' : 'https://goli8111.github.io/home-training/data/hollow-body-kick-set-2.mp4',\r\n      'url' : 'https://goli8111.github.io/home-training/data/intro.mp4',\r\n      'enableContentsPause' : true,\r\n      //'enableContentsPause' : false,\r\n      'enablePlayerView' : true,\r\n      'key' : 'hollow-body-kick'\r\n    },\r\n    \"step10\" : {\r\n      'title' : '',\r\n      'desc': '결과',\r\n      'type': 'extra',\r\n      'url' : 'https://goli8111.github.io/home-training/data/core-abs-result.mp4',\r\n      'enableContentsPause' : false,\r\n      'enablePlayerView' : false,\r\n      'key' : 'result'\r\n    },\r\n  }","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { setScene } from '../actions/scene';\r\nimport { InvalidPosenetClear, SetCameraRecord } from '../actions/posenet';\r\n\r\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\r\nimport \"react-circular-progressbar/dist/styles.css\";\r\n\r\nimport ResultFailure from '../components/ResultFailure';\r\nimport ResultSuccess from '../components/ResultSuccess';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { VideoRecord_InvalidDataClear } from './../components/utils/VideoRecord';\r\n\r\nimport VideoPlay from '../components/videoPlay'\r\nimport PoseCameraRecord from '../components/PoseCameraRecord'\r\n\r\nimport { _contents } from './ContentsData'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    maxHeight: '100%',\r\n  },\r\n  videoContainer: {\r\n    width: '100%',\r\n    position: 'relative',\r\n  },\r\n  progressContainer: {\r\n    position: 'absolute',\r\n    zIndex: '1',\r\n    left: '2%',\r\n    top: '20%',\r\n    width: '15%',\r\n    height: '15%',\r\n    margin: '0'\r\n},\r\n}));\r\n\r\n// TV 연결 기능 아이콘 추가\r\n// 로컬에 영상 저장\r\n// 레디, 셋, 고 영상에 넣기\r\nvar _debugStartStep = 6\r\nvar _lastCameraRecordStep = 0;\r\nvar _recordResultDelayDuration = 2000;\r\nexport const ContentsScene = ({ _posenetPose, setScene, InvalidPosenetClear, SetCameraRecord, _invalidPosenetList, _validPosenetList, _currentTime, _maxTime }) => {\r\n  const classes = useStyles();\r\n  const [_step, setStep] = React.useState(_debugStartStep);\r\n\r\n  const getStepContents = () => {\r\n    let contents = [];\r\n    var contentsData = getStepData(_step);\r\n    //console.log(contentsData.title);\r\n    if (undefined != contentsData) {\r\n      contents.push(\r\n        createVideoElement(contentsData.title, contentsData.url, contentsData.enableContentsPause)\r\n      );\r\n      \r\n      // 마지막 데이터일 경우 결과화면\r\n      var nextContentsData = getStepData(_step+1);\r\n      if (undefined == nextContentsData) {\r\n        contents.push(getResultScene());\r\n      }\r\n\r\n      if (contentsData.enablePlayerView == true) {\r\n        // 카메라 레코딩을 한번만 호출하기 위해서\r\n        if (_lastCameraRecordStep != _step) {\r\n          SetCameraRecord(true);\r\n          _lastCameraRecordStep = _step;\r\n        }\r\n        contents.push(getPoseNetMiniCamera());\r\n      }\r\n    }\r\n    return contents;\r\n  }\r\n\r\n  const getStepData = (step) => {\r\n    return _contents['step' + step];\r\n  }\r\n\r\n  const createVideoElement = (title, url, enableContentsPause) => {\r\n    return (<VideoPlay key={url} title={title} enableContentsSkip={true} enableContentsPause={enableContentsPause} enableCountDown={true}\r\n    onVideoPlayComplete={onVideoEnded} onVideoSkip={onVideoSkip} videoUrl={url} autoPlay={true} enableTitleText={true} enableFullScreen={true} enableScreenMirror={enableContentsPause} />);\r\n  }\r\n\r\n  const onNextStep = () => {\r\n    // 마지막 데이터일 경우 결과화면\r\n    var nextStep = _step + 1;\r\n    var nextContentsData = getStepData(nextStep);\r\n    if (undefined != nextContentsData) {\r\n      changeSceneType(nextStep);\r\n    }\r\n  }\r\n\r\n  const onVideoEnded = () => {\r\n    console.log('onVideoEnded call');\r\n    var contentsData = getStepData(_step);\r\n    if (undefined == contentsData) {\r\n      return;\r\n    }\r\n\r\n    SetCameraRecord(false);\r\n    if (contentsData.enablePlayerView) {\r\n      setTimeout(function () {\r\n        onNextStep();\r\n      }, _recordResultDelayDuration);\r\n    }\r\n  }\r\n\r\n  const onVideoSkip = () => {\r\n    console.log('onVideoSkip call');\r\n    var contentsData = getStepData(_step);\r\n    if (undefined == contentsData) {\r\n      return;\r\n    }     \r\n    onNextStep();\r\n  }\r\n\r\n  function changeSceneType(change) {\r\n    var preStep = _step;\r\n    var nextStep = change;\r\n\r\n    // 이미 성공한 포즈일 경우 패스\r\n    for (var i = 0; i < _validPosenetList.length; i++) {\r\n      var value = _validPosenetList[i];\r\n      if (value == nextStep || value == nextStep + 1) {\r\n        console.log('skip scene type:' + preStep + '=>' + value);\r\n        changeSceneType(value+1);\r\n        return;\r\n      }\r\n    }\r\n    setStep(nextStep);\r\n    console.log('change scene type:' + preStep + '=>' + nextStep);\r\n  }\r\n\r\n  const getPoseNetMiniCamera = () => {\r\n    var titleText = undefined;\r\n    var desc = undefined;\r\n    var contentsData = getStepData(_step);\r\n    if (undefined != contentsData) {\r\n      titleText = contentsData.title;\r\n      desc = contentsData.desc;\r\n    }\r\n    return (\r\n      <div key=\"PoseNetMiniCamera\">\r\n        <PoseCameraRecord step={_step} title={titleText} desc={desc}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const onOKClick = () => {\r\n    console.log('onOKClick');\r\n    //setFullScreenResultScene(true);\r\n    setStep(_debugStartStep);\r\n    setScene('Result');\r\n  }\r\n\r\n  const onRetryClick = () => {\r\n    console.log('onRetryClick');\r\n    _lastCameraRecordStep = 0;\r\n    InvalidPosenetClear();\r\n    VideoRecord_InvalidDataClear();\r\n    changeSceneType(_debugStartStep);\r\n  }\r\n\r\n  const getResultScene = () => {\r\n    //console.log('getResultScene _invalidPlaySet count:' + _invalidPlaySet.length);\r\n    var failureCount = _invalidPosenetList.length;\r\n    if (failureCount == 0) {\r\n      return (\r\n        <div key=\"ResultSuccess\">\r\n          <ResultSuccess onOKClick={onOKClick} />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div key=\"ResultFailure\">\r\n          <ResultFailure failureCount={failureCount} onOKClick={onOKClick} onRetryClick={onRetryClick} />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  const getTimer = () => {\r\n    var contentsData = getStepData(_step);\r\n    if (undefined == contentsData) {\r\n      return;\r\n    }\r\n    if (contentsData.enablePlayerView == false) {\r\n      return;\r\n    }\r\n\r\n    var leftTime = parseInt(_maxTime - _currentTime);\r\n    return (\r\n      <div className={classes.progressContainer}>\r\n        <CircularProgressbar value={leftTime} maxValue={_maxTime} text={`${leftTime}`}\r\n          styles={buildStyles({\r\n            textColor: \"#ffffff\",\r\n            pathColor: \"#ffffff\",\r\n            trailColor: \"#ffffff11\",\r\n            textSize: '40px'\r\n          })} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.videoContainer}>\r\n        {getStepContents()}\r\n        {getTimer()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  _posenetPose: state.posenet._posenetPose,\r\n  _invalidPosenetList: state.posenet._invalidPosenetList,\r\n  _validPosenetList: state.posenet._validPosenetList,\r\n  _maxTime: state.countdown._maxTime,\r\n  _currentTime: state.countdown._currentTime\r\n});\r\nconst mapDispatchToProps = { InvalidPosenetClear, SetCameraRecord, setScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContentsScene);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SetSubScene } from '../actions/scene';\r\n\r\nimport './FullScreenResult.css';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport VideoPlay from './videoPlay'\r\n\r\nimport { GetVideoSourceList, VideoRecordClear, VideoRecordDelete, GetVideoSourceFullList } from './utils/VideoRecord'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    maxHeight: '100%',\r\n  },\r\n  videoRoot: {\r\n    position: 'absolute',\r\n    top: '5%',\r\n    height: '95%',\r\n    width: '100%',\r\n  },\r\n  videoContainer: {\r\n    position: 'relative',\r\n    width: '100%',\r\n  },\r\n  contentsTitle_fail: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    left: '0%',\r\n    color: 'red',\r\n  },\r\n  contentsTitle_fail_desc: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    left: '0%',\r\n    color: 'gray'\r\n  },\r\n  contentsSummery: {\r\n    width: '100%',\r\n  },\r\n  contentsSummery_left: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    left: \"10px\",\r\n    color: 'black',\r\n  },\r\n  contentsSummery_right: {\r\n    position: \"absolute\",\r\n    top: \"5px\",\r\n    right: \"30px\",\r\n    color: 'black',\r\n  },\r\n  video: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    margin: '0',\r\n    //opacity: '0.2'\r\n  }\r\n}));\r\n\r\nvar _contentsTitle = '내기록';\r\nvar _recordFailText = '영상 기록 없음';\r\nvar _contentsSourceList = undefined;\r\nexport const FullScreenResult = ({ _currentSubScene, _invalidPosenetList, _validPosenetList }) => {\r\n  const classes = useStyles();\r\n  const [_videoFaceMask, setVideoFaceMask] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    _contentsSourceList = GetVideoSourceList(true);\r\n    if (undefined != _contentsSourceList && 0 < _contentsSourceList.length) {\r\n      console.log('FullScreenResult source count:' + _contentsSourceList.length);\r\n    } else {\r\n      console.log('FullScreenResult source zero');\r\n    }\r\n  });\r\n\r\n  const onToggleVideoFaceMask = (e) => {\r\n    var index = e.target.getAttribute(\"data-index\");\r\n    console.log('onToggleVideoFaceMask call index:'+ index);\r\n    setVideoFaceMask(!_videoFaceMask);\r\n  }\r\n\r\n  const onDeleteVideo = (e) => {\r\n    var index = e.target.getAttribute(\"data-index\");\r\n    console.log('onDeleteVideo call index:' + index);\r\n    VideoRecordDelete(index);\r\n    setVideoFaceMask(!_videoFaceMask);\r\n  }\r\n\r\n  const getContentsSummeryText = () => {\r\n    var totalCount = _invalidPosenetList.length + _validPosenetList.length;\r\n    var validCount = _validPosenetList.length;\r\n    return (\r\n      <div>\r\n        <span style={{ color: 'green' }}>{validCount} Set</span>기록 / 총 {totalCount} Set\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getRecordSuccuss = (index, desc, url) => {\r\n    return (\r\n      <div key={desc}>\r\n        <div className='contentsTitle_left'>\r\n          <div className={classes.contentsTitle_success_icon}>\r\n            <img onClick={onToggleVideoFaceMask} data-index={index} className='contentsTitle_success_smile_icon' src={process.env.PUBLIC_URL + '/img/face-mask-icon.png'} />\r\n            <img onClick={onDeleteVideo} data-index={index} className='contentsTitle_success_delete_icon' src={process.env.PUBLIC_URL + '/img/result-scene-delete-icon.png'} />\r\n          </div>\r\n          <span className='contentsTitle_success_text'>{desc}\r\n          </span>\r\n        </div>\r\n        <video className={classes.video} autoPlay={false} controls={true} poster={process.env.PUBLIC_URL + '/img/HomeTrainingQuest_icon.png'}>\r\n          <source src={url} type=\"video/mp4\" id=\"SelectSoundOutput\" />\r\n                Your browser does not support the video tag.\r\n        </video>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const getRecordFail = (desc) => {\r\n    return (\r\n      <div key={desc}>\r\n        <div className='contentsTitle_fail_left' >\r\n          <span className={classes.contentsTitle_fail} >{desc}</span>\r\n        </div>\r\n        <div className='contentsTitle_fail_center' >\r\n          <span className={classes.contentsTitle_fail_desc}>{_recordFailText}</span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const createVideoElement = (index, title, desc, url, isValid) => {\r\n    //console.log('createVideoElement ' + title)\r\n    return (\r\n      <div key={title} >\r\n        {(isValid) ? getRecordSuccuss(index, desc, url) : getRecordFail(desc)}\r\n      </div>);\r\n  }\r\n\r\n  const getVideoList = () => {\r\n    let contents = [];\r\n\r\n    var fullSourceList = GetVideoSourceFullList();\r\n    if (undefined != fullSourceList) {\r\n      console.log('fullSourceList:' + fullSourceList.length);\r\n      for (var i = 0; i < fullSourceList.length; i++) {\r\n        contents.push(createVideoElement(i, fullSourceList[i].title, \r\n          fullSourceList[i].desc, fullSourceList[i].url, fullSourceList[i].valid));\r\n      }\r\n    }\r\n    return contents;\r\n  }\r\n\r\n\r\n  return (\r\n    <div key='FullScreenResult' className={classes.root}>\r\n      <div className={classes.contentsSummery}>\r\n        <span className={classes.contentsSummery_left}>{_contentsTitle}</span>\r\n        <span className={classes.contentsSummery_right}>{getContentsSummeryText()}</span>\r\n      </div>\r\n\r\n\r\n      <div className={classes.videoRoot}>\r\n          <div className={classes.videoContainer}>\r\n            {getVideoList()} \r\n          </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  _currentSubScene: state.scene._currentSubScene,\r\n  _invalidPosenetList: state.posenet._invalidPosenetList,\r\n  _validPosenetList: state.posenet._validPosenetList,\r\n});\r\nconst mapDispatchToProps = { SetSubScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FullScreenResult);\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { setScene } from '../actions/scene';\r\nimport { InvalidPosenetClear } from '../actions/posenet';\r\n\r\nimport ResultFailure from '../components/ResultFailure';\r\nimport ResultSuccess from '../components/ResultSuccess';\r\n\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { VideoRecord_InvalidDataClear } from './../components/utils/VideoRecord';\r\n\r\nimport VideoPlay from '../components/videoPlay'\r\nimport PoseCameraRecord from '../components/PoseCameraRecord'\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { _contents } from './ContentsData'\r\nimport './Contents.css';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    videoContainer: {\r\n        width: '100%',\r\n        position: 'relative',\r\n    },\r\n    contentsTitle: {\r\n        color: 'black'\r\n    },\r\n    BottomBarBack: {\r\n        position: \"fixed\",\r\n        backgroundColor: '#FFFFFF88',\r\n        width: '100%',\r\n        height: '11%',\r\n        top: '89%',\r\n        left: '0%'\r\n    },\r\n    BottomBarButton: {\r\n        position: \"fixed\",\r\n        height: \"8%\",\r\n        top: \"90%\",\r\n        background: 'linear-gradient(90deg, #cc6699 30%, #6666ff 80%)',\r\n        borderRadius: 3,\r\n        border: 0,\r\n        color: 'white',\r\n        boxShadow: '0 3px 5px 2px rgba(0, 0, 0, .3)',\r\n        width: \"94%\",\r\n        left: \"3%\",\r\n    },\r\n    BottomBarButton_text_1: {\r\n        position: 'absolute',\r\n        left: \"0\",\r\n        top: \"10%\",\r\n        width: \"100%\",\r\n        fontSize: '140%',\r\n        fontWeight: 'bold'\r\n    },\r\n    BottomBarButton_text_2: {\r\n        position: 'absolute',\r\n        left: \"0\",\r\n        top: \"60%\",\r\n        width: \"100%\",\r\n        fontSize: '80%',\r\n    }\r\n}));\r\n\r\n\r\nexport const IntroScene = ({ _posenetPose, setScene }) => {\r\n    const classes = useStyles();\r\n    console.log('IntroScene start');\r\n\r\n    const createVideoElement = (title, desc, url) => {\r\n        //console.log('createVideoElement ' + title)\r\n        return (\r\n            <div key={title} >\r\n                <span className={classes.contentsTitle}>{desc}</span>\r\n                <div className={classes.videoContainer}>\r\n                    <VideoPlay key={url} title={title} enableContentsSkip={false} enableContentsPause={false} videoUrl={url} autoPlay={false} enableTitleText={false} enableFullScreen={false} enableScreenMirror={false} />\r\n                </div>\r\n            </div>);\r\n    }\r\n\r\n    const getContents = () => {\r\n        let contents = [];\r\n        Object.keys(_contents).forEach(function (k, v) {\r\n            if (_contents[k].type == 'set') {\r\n                contents.push(createVideoElement(_contents[k].title, _contents[k].desc,_contents[k].url));\r\n            }\r\n        });\r\n        return contents;\r\n    }\r\n\r\n    const onPlay = () => {\r\n        console.log('onPlay call');\r\n        //setScene('Play');\r\n        setScene('BodyScan');\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className='contents_body'>\r\n                <div className='contents_intro'>\r\n                    <span className='.contents_intro_text'>어디스든 가볍게!</span>\r\n                    <span className='contents_intro_text_sub'><br />딱 16분 트레이닝으로 코어를 단단하게 조이고, 복근을 활성화 합니다.<br />따라오세요</span>\r\n                </div>\r\n                {getContents()}\r\n                <br />\r\n                <br />\r\n                <br />\r\n                <div className={classes.BottomBarBack}></div>\r\n            </div>\r\n            <Button onClick={onPlay} className={classes.BottomBarButton} variant=\"contained\" color=\"secondary\">\r\n                    <span className={classes.BottomBarButton_text_1}>영상 기록 시작</span>\r\n                    <span className={classes.BottomBarButton_text_2}>총 11 Set / 15 분</span>\r\n            </Button>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    _posenetPose: state.posenet._posenetPose\r\n});\r\nconst mapDispatchToProps = { setScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IntroScene);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport * as posenet from '@tensorflow-models/posenet'\r\nimport { SetPosenetPose, ClosePosenet } from '../actions/posenet'\r\n\r\nvar _videoUserCameraFlag = true;\r\n\r\nconst rootStyle = {\r\n    position: \"fixed\",\r\n    left: \"0%\",\r\n    top: \"0%\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    zIndex: '-3',\r\n    backgroundColor : 'black'\r\n}\r\n\r\nconst videoStyle = {\r\n    position: \"fixed\",\r\n    left: \"0%\",\r\n    //top: \"0%\",\r\n    width: \"100%\",\r\n    height: \"auto\",\r\n    top: \"50%\",\r\n    transform: 'translate(0%, -50%)',\r\n    zIndex: '-2'\r\n}\r\n\r\nconst canvasStyle = {\r\n    position: \"fixed\",\r\n    left: \"0%\",\r\n    //top: \"0%\",\r\n    width: \"100%\",\r\n    height: \"auto\",\r\n    top: \"50%\",\r\n    transform: 'translate(0%, -50%)',\r\n    zIndex: '-1'\r\n}\r\n\r\nclass CameraCapture extends Component {\r\n\r\n    static defaultProps = {\r\n        showVideo: false,\r\n        showDebugVideo: true,\r\n        loadingText: 'Loading...please be patient...'\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props, CameraCapture.defaultProps)\r\n        //this.resize = this.resize.bind(this);\r\n        this.stopCamera = this.stopCamera.bind(this);\r\n    }\r\n\r\n    getCanvas = elem => {\r\n        this.canvas = elem\r\n    }\r\n\r\n    getCanvasOverlay = elem => {\r\n        this.canvasOverlay = elem\r\n    }\r\n\r\n    getVideo = elem => {\r\n        this.video = elem;\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            this.posenet = await posenet.load()\r\n        } catch (error) {\r\n            throw new Error('PoseNetCamera failed to load')\r\n        }\r\n\r\n        try {\r\n            await this.setupCamera();\r\n        } catch (error) {\r\n            throw new Error(\r\n                'This browser does not support video capture, or this device does not have a camera'\r\n            )\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.stopCamera();\r\n    }\r\n\r\n    async setupCamera() {\r\n        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n            throw new Error(\r\n                'Browser API navigator.mediaDevices.getUserMedia not available'\r\n            )\r\n        }\r\n        navigator.mediaDevices.enumerateDevices()\r\n            .then(function (devices) {\r\n                devices.forEach(function (device) {\r\n                    if (device.kind === 'videoinput') {\r\n                        //_videoCamneraList.push(device.deviceId);\r\n                    }\r\n                    console.log(device.kind + \": \" + device.label + \", id = \" + device.deviceId);\r\n                });\r\n            })\r\n            .catch(function (err) {\r\n                console.log(err.name + \": \" + err.message);\r\n            });\r\n\r\n        //this.resize();\r\n        this.playCamera();\r\n        this.updateCamera();\r\n    }\r\n\r\n    async playCamera() {\r\n        if (window.stream) {\r\n            window.stream.getTracks().forEach(track => {\r\n                track.stop();\r\n            });\r\n        }\r\n        const video = this.video;\r\n        var screenWidth = 1080;//1280;//1920;//video.width;//window.innerWidth;\r\n        var screenHeight = 1080;//720;//1080;//video.height;//window.innerHeight;\r\n\r\n        var facingModeText = 'user';\r\n        if (_videoUserCameraFlag == false) {\r\n            facingModeText = 'environment';\r\n        }\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: false,\r\n          video: {\r\n            //deviceId: videoSource ? { exact: videoSource } : undefined,\r\n            facingMode: facingModeText,\r\n            frameRate: 60,\r\n            width: {exact: screenWidth},\r\n            height: {exact: screenHeight},\r\n            aspectRatio: {\r\n                exact: screenWidth / screenHeight\r\n            }\r\n          }\r\n        })\r\n\r\n        window.stream = stream;\r\n        video.srcObject = stream;\r\n        video.play();\r\n    }\r\n\r\n    stopCamera() {\r\n        console.log('stopCamera call');\r\n        const video = this.video;\r\n        //console.log(video);\r\n        if (undefined == video) {\r\n            return;\r\n        }\r\n        video.pause();\r\n        video.src = \"\";\r\n        if (undefined != video.srcObject) {\r\n            video.srcObject.getTracks()[0].stop();\r\n            video.srcObject = undefined;\r\n        }\r\n        console.log(\"video off\");\r\n    }\r\n\r\n    updateCamera() {\r\n        const canvas = this.canvas;\r\n        if (undefined == canvas) {\r\n            return;\r\n        }\r\n        const canvasContext = canvas.getContext('2d')\r\n        if (undefined == canvasContext) {\r\n            return;\r\n        }\r\n        const video = this.video;\r\n        if (undefined == video) {\r\n            return;\r\n        }\r\n        //console.log('showVideo:' + this.props.showVideo);\r\n        if (false == this.props.showVideo) {\r\n            video.style.display = \"none\";\r\n        }\r\n        else {\r\n            video.style.display = \"block\";\r\n        }\r\n        this.updateCameraFrame(canvasContext)\r\n    }\r\n\r\n    updateCameraFrame(canvasContext) {\r\n        const video = this.video;\r\n        const posenetModel = this.posenet;\r\n        var imageScaleFactor = 0.5;\r\n        var flipHorizontal = true;\r\n        var outputStride = 16;\r\n        const findUpdateCameraFrame = async () => {\r\n            try {\r\n                let poses = []\r\n                const pose = await posenetModel.estimateSinglePose(\r\n                    video,\r\n                    imageScaleFactor,\r\n                    flipHorizontal,\r\n                    outputStride\r\n                )\r\n                //SetPoseData(pose);\r\n                this.props.onPosenetPose(pose);\r\n                poses.push(pose)\r\n\r\n            } catch (error) {\r\n                console.log('posenet detection error');\r\n                // throw new Error(\r\n                //   'This browser does not support video capture, or this device does not have a camera'\r\n                // )\r\n            }\r\n\r\n            const canvas = this.canvas;\r\n            if (true == this.props.showDebugVideo && undefined != canvas) {\r\n\r\n                if (video.videoWidth != canvas.width || video.videoHeight != canvas.height) {\r\n                    canvas.width = video.videoWidth;\r\n                    canvas.height = video.videoHeight;\r\n                    canvasContext.width = video.videoWidth;\r\n                    canvasContext.height = video.videoHeight;\r\n                }\r\n                canvasContext.clearRect(0, 0, canvas.width, canvas.height);\r\n                canvasContext.save();\r\n                canvasContext.drawImage(video, 0, 0);//, video.videoWidth, video.videoHeight)\r\n                canvasContext.restore();\r\n            }\r\n\r\n            if ('start' == this.props._closeCamera) {\r\n                this.stopCamera();\r\n                this.props.onCloseCamera('complete');\r\n                return;\r\n            }\r\n\r\n            setTimeout(function () {\r\n                requestAnimationFrame(findUpdateCameraFrame);\r\n            }, 1000);\r\n            //requestAnimationFrame(findUpdateCameraFrame)\r\n        }\r\n        findUpdateCameraFrame()\r\n    }\r\n\r\n    onNextCamera = () => {\r\n        // _videoSelectIndex++;\r\n        // if (_videoCamneraList.length <= _videoSelectIndex)\r\n        //   _videoSelectIndex = 0;\r\n        // console.log('camera index : ' + _videoSelectIndex);\r\n\r\n        _videoUserCameraFlag = !_videoUserCameraFlag;\r\n        console.log('user camera flag : ' + _videoUserCameraFlag);\r\n        this.playCamera();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={rootStyle}>\r\n                {/* <meta http-equiv=\"Content-Security-Policy\" content=\"default-src * gap:; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src *; img-src * data: blob: android-webview-video-poster:; style-src * 'unsafe-inline';\" /> */}\r\n                <video id='videoCamera' style={videoStyle} src=\"\" playsInline ref={this.getVideo} />\r\n                <canvas style={canvasStyle} ref={this.getCanvas} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        _current_scene: state.scene._current_scene,\r\n        //_closeCamera: state.camera._closeCamera\r\n    };\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onPosenetPose: (poseData) => dispatch(SetPosenetPose(poseData)),\r\n        onClosePosenet: (state) => dispatch(ClosePosenet(state))\r\n    }\r\n}\r\n\r\nCameraCapture = connect(mapStateToProps, mapDispatchToProps)(CameraCapture);\r\n\r\nexport default CameraCapture;\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { setScene } from '../actions/scene';\r\n\r\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\r\nimport \"react-circular-progressbar/dist/styles.css\";\r\n\r\nimport PoseNetCamera from '../components/posenet/PosenetCamera'\r\nimport CameraCapture from './../components/CameraCapture'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'absolute',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    videoContainer: {\r\n        position: 'absolute',\r\n        height: '100%',\r\n        width: '100%',\r\n        left: '0%',\r\n        top: '0%'\r\n    },\r\n    contentsLoading: {\r\n        position: 'absolute',\r\n        zIndex: '1',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '100%',\r\n        height: '100%',\r\n        textAlign : 'left',\r\n        margin: '0 auto',\r\n        fontSize: '150%',\r\n        textShadow: '2px 2px 5px black',\r\n        color: 'white',\r\n        //backgroundColor: '#FF000088',\r\n    },\r\n    progressContainer: {\r\n        position: 'absolute',\r\n        zIndex: '1',\r\n        left: '0%',\r\n        top: '0%',\r\n        width: '20%',\r\n        height: '20%',\r\n        marginLeft: '5%',\r\n        marginTop: '10%' \r\n    },\r\n}));\r\n\r\n// 풀화면으로 화면안에 들어왔는지 인식\r\nvar _minPoseConfidence = 0.3;\r\nvar _maxScaneCount = 4;\r\nexport const VideoBodyScanScene = ({ _posenetPose, setScene }) => {\r\n    const classes = useStyles();\r\n    const [_step, setStep] = React.useState(0);\r\n\r\n    useEffect(() => {\r\n        console.log('_posenetPose effect call');\r\n        if (undefined != _posenetPose) {\r\n            if (_minPoseConfidence <= _posenetPose.score) {\r\n                addScanProgress();\r\n            } else {\r\n                resetScanProgress();\r\n            }\r\n        }\r\n    }, [_posenetPose]);\r\n    const getPoseNetCamera = () => {\r\n        return (\r\n            <div key=\"PoseNetScanCamera\">\r\n                <CameraCapture />\r\n                {/* <PoseNetCamera showMiniVideo={false} minPoseConfidence={_minPoseConfidence} /> */}\r\n            </div>\r\n        );\r\n    }\r\n    const addScanProgress = () => {\r\n        setStep(_step+1);\r\n    }\r\n    const resetScanProgress = () => {\r\n        setStep(0);\r\n    }\r\n    if (_step >= _maxScaneCount) {\r\n        setScene('Play');\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.videoContainer}>\r\n                <div className={classes.progressContainer}>\r\n                    <CircularProgressbar value={_step} maxValue={_maxScaneCount} text={`${_step * (100 / 4)}%`} \r\n                    styles={buildStyles({\r\n                        textColor: \"#ffffff\",\r\n                        pathColor: \"#ffffff\",\r\n                        trailColor: \"#ffffff11\",\r\n                        textSize: '40px'\r\n                    })} />\r\n                </div>\r\n                <span className={classes.contentsLoading}>카메라 인식 중...</span>\r\n                {getPoseNetCamera()}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    _posenetPose: state.posenet._posenetPose\r\n});\r\nconst mapDispatchToProps = { setScene };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VideoBodyScanScene);\r\n","\r\nexport var _contents = {\r\n    \"step3\" : {\r\n      'title' : '마운틴 클라이머(set)',\r\n      'desc': '워밍업:마운틴 클라이머 40초',\r\n      'url' : 'https://goli8111.github.io/home-training/data/mountain-climber-set.mp4',\r\n      'comments' : ['0:41', '다리를 펴주세요.', '1:15', '마운틴 자세 시, 허리를 더 펴주세요.'],\r\n    },\r\n    \"step5\" : {\r\n      'title' : '플랭크 인 앤 아웃(set)',\r\n      'desc': '플랭크 인 앤 아웃 30초 X 1 set',\r\n      'url' : 'https://goli8111.github.io/home-training/data/plank-in-and-out-set.mp4',\r\n      'comments' : ['0:13', '조금 더 빠르게 진행 해주세요.'],\r\n    },\r\n    \"step7\" : {\r\n      'title' : '할로우바디 킥 Set#1',\r\n      'desc': '할로우바디 킥 30초 X 1 set',\r\n      'url' : 'https://goli8111.github.io/home-training/data/hollow-body-kick-set-1.mp4',\r\n      'comments' : ['0:00', '완벽합니다.'],\r\n    },\r\n    \"step9\" : {\r\n      'title' : '할로우바디 킥 Set#2',\r\n      'desc': '할로우바디 킥 30초 X 2 set',\r\n      'url' : 'https://goli8111.github.io/home-training/data/hollow-body-kick-set-2.mp4',\r\n    }\r\n  }","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { SetSubScene } from '../actions/scene';\r\n\r\nimport { _contents } from './ContentsResultData'\r\nimport './FeedbackScene.css';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        maxHeight: '100%',\r\n    },\r\n    videoRoot: {\r\n        position: 'relative',\r\n        top: '5%',\r\n        height: '95%',\r\n        width: '100%',\r\n    },\r\n    videoContainer: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        margin: '5px'\r\n    },\r\n    video: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        margin: '0',\r\n    },\r\n    divLine: {\r\n        border: \"1px solid\",\r\n        color: \"#DDDDDD\",\r\n        width: \"95%\"\r\n    }\r\n}));\r\n\r\nvar _contentsTitle = '마스터 코멘트';\r\n\r\nexport const FeedbackScene = ({resultState}) => {\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n    });\r\n\r\n    const getConmentsText = (comments) => {\r\n        if (undefined == comments) {\r\n            return undefined;\r\n        }\r\n\r\n        let contents = [];\r\n        var count = parseInt(comments.length / 2);\r\n        for (var i = 0; i < count; i++) {\r\n            if (i != 0) {\r\n                contents.push(<br key={comments} />);\r\n            }\r\n            var targetIndex = i * 2;\r\n            var time = comments[targetIndex];\r\n            var comment = comments[targetIndex + 1];\r\n            contents.push(<span key={time + comment + '0'} className='contentsTitle_success_time'>{time} </span>);\r\n            contents.push(<span key={time + comment + '1'} className='contentsTitle_success_text'>{comment}</span>);\r\n        }\r\n        return contents;\r\n    }\r\n\r\n    const getRecordSuccuss = (desc, url, comments) => {\r\n        return (\r\n            <div key={desc}>\r\n                <div className='contentsTitle_left'>\r\n                    <span className='contentsTitle_success_text'>{desc}\r\n                    </span>\r\n                </div>\r\n                <video className={classes.video} autoPlay={false} controls={true} poster={process.env.PUBLIC_URL + '/img/HomeTrainingQuest_icon.png'}>\r\n                    <source src={url} type=\"video/mp4\" id=\"SelectSoundOutput\" />\r\n                    Your browser does not support the video tag.\r\n                </video>\r\n                <div className='contentsTitle_left'>\r\n                    {getConmentsText(comments)}\r\n                    {/* <span className='contentsTitle_success_time'>3:15\r\n                    </span>\r\n                \r\n                    <span className='contentsTitle_success_text'>asdfasdfasdf\r\n                    </span> */}\r\n                </div>\r\n                <hr className={classes.divLine} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const getResultSummery = () => {\r\n        if (resultState) {\r\n            return (\r\n                <div>\r\n                    약간의 동작 교정이 필요하지만, 잘하셨습니다,\r\n                    <br />\r\n                    클리어 도장 찍어드립니다!\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div>\r\n                    아쉽습니다.\r\n                    <br />\r\n                    코멘트를 읽어보시고 다시 도전하세요.\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    const getVideoList = () => {\r\n        let contents = [];\r\n        Object.keys(_contents).forEach(function (k, v) {\r\n            contents.push(getRecordSuccuss(_contents[k].desc, _contents[k].url, _contents[k].comments));\r\n        });\r\n        return contents;\r\n    }\r\n\r\n    return (\r\n        <div key='FeedbackScene' className={classes.root}>\r\n            <div className='contentsSummery'>\r\n                <span className='contentsSummery_title'>{_contentsTitle}</span>\r\n                <div className='contentsSummery_result'>\r\n                    {getResultSummery()}\r\n                </div>\r\n                <hr className={classes.divLine} />\r\n                <div className={classes.videoRoot}>\r\n                    <div className={classes.videoContainer}>\r\n                        {getVideoList()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n                _currentSubScene: state.scene._currentSubScene,\r\n    _invalidPosenetList: state.posenet._invalidPosenetList,\r\n    _validPosenetList: state.posenet._validPosenetList,\r\n});\r\nconst mapDispatchToProps = { SetSubScene};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackScene);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './App.css';\r\nimport ContentsScene from './scene/ContentsScene';\r\nimport FullScreenResult from './components/FullScreenResult';\r\nimport IntroScene from './scene/IntroScene';\r\nimport VideoBodyScanScene from './scene/VideoBodyScanScene';\r\nimport FeedbackScene from './scene/FeedbackScene';\r\nimport { SetIframeFullScreen, SetLandscapeMode } from './components/utils/SendMessage'\r\n\r\nclass App extends Component {\r\n\r\n  componentWillUnmount() {\r\n    SetIframeFullScreen(false);\r\n    SetLandscapeMode(false);\r\n  }\r\n\r\n  getScene() {\r\n     switch (this.props._currentScene) {\r\n      case 'Result': {\r\n        SetIframeFullScreen(false);\r\n        SetLandscapeMode(false);\r\n        return <FullScreenResult />;\r\n      }\r\n      case 'Play': {\r\n        SetIframeFullScreen(true);\r\n        SetLandscapeMode(true);\r\n        return <ContentsScene />;\r\n      }\r\n      case 'BodyScan': {\r\n        SetIframeFullScreen(true);\r\n        SetLandscapeMode(true);\r\n        return <VideoBodyScanScene />;\r\n      }\r\n      case 'Feedback': {\r\n        SetIframeFullScreen(false);\r\n        SetLandscapeMode(false);\r\n        return <FeedbackScene resultState={false}/>;\r\n      }\r\n      default: {\r\n        SetIframeFullScreen(false);\r\n        SetLandscapeMode(false);\r\n        return <IntroScene />;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        {this.getScene()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    _currentScene: state.scene._currentScene\r\n  };\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n  }\r\n}\r\n\r\nApp = connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { SETSCENE, SETSUBSCENE } from '../actions/scene'\r\n\r\nconst initialState = {\r\n    _currentScene: 'IndexScene', // \r\n    _currentSubScene: '',\r\n};\r\n\r\nexport default function scene(state = initialState, action) {\r\n    switch(action.type) {\r\n        case SETSCENE:\r\n            console.log('SETSCENE:' + action._changeScene);\r\n            return Object.assign({}, state, {\r\n                _currentScene: action._changeScene\r\n            });\r\n        case SETSUBSCENE:\r\n            console.log('SETSUBSCENE:' + action._changeSubScene);\r\n            return Object.assign({}, state, {\r\n                _currentSubScene: action._changeSubScene\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n\r\n//export default scene;","import { SETPOSENETPOSE, CLOSEPOSENET, INVALIDPOSENET, INVALIDPOSENET_CLEAR, VALIDPOSENET, SETCAMERARECORD } from '../actions/posenet'\r\n\r\nconst initialState = {\r\n    _posenetPose: undefined,\r\n    _closePosenet: '',\r\n    _invalidPosenetList:[],\r\n    _validPosenetList:[],\r\n    _recordState: false\r\n};\r\n\r\nexport default function posenet(state = initialState, action) {\r\n    //console.log('reducer posenet action call:' + action.type);\r\n    switch(action.type) {\r\n        case SETPOSENETPOSE:\r\n            //console.log('SETPOSENETPOSE:');\r\n            //console.log(action._posenetPose);\r\n            return Object.assign({}, state, {\r\n                _posenetPose: action._posenetPose\r\n            });\r\n        case CLOSEPOSENET:\r\n            console.log('CLOSEPOSENET:' + action._closePosenet);\r\n            return Object.assign({}, state, {\r\n                _closePosenet: action._closePosenet\r\n            });\r\n        case INVALIDPOSENET:\r\n            console.log('INVALIDPOSENET:');\r\n            console.log(state._invalidPosenetList);\r\n            return {\r\n                ...state,\r\n                _invalidPosenetList: [...state._invalidPosenetList, action._invalidPoseKey]\r\n            };\r\n        case INVALIDPOSENET_CLEAR:\r\n            console.log('INVALIDPOSENET_CLEAR:');\r\n            console.log(state._invalidPosenetList);\r\n            return {\r\n                ...state,\r\n                _invalidPosenetList: []\r\n            };\r\n        case VALIDPOSENET:\r\n            console.log('VALIDPOSENET:');\r\n            console.log(state._validPosenetList);\r\n            return {\r\n                ...state,\r\n                _validPosenetList: [...state._validPosenetList, action._validPoseKey]\r\n            }\r\n        case SETCAMERARECORD:\r\n            console.log('SETCAMERARECORD:' + action._recordState);\r\n            return Object.assign({}, state, {\r\n                _recordState: action._recordState\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n}","import { SETMAXTIME, SETCURRENTTIME } from '../actions/countdown'\r\n\r\nconst initialState = {\r\n    _currentTime: 0,\r\n    _maxTime: 0\r\n};\r\n\r\nexport default function countdown(state = initialState, action) {\r\n    switch(action.type) {\r\n        case SETMAXTIME:\r\n            //console.log('SETMAXTIME:' + action._maxTime);\r\n            return Object.assign({}, state, {\r\n                _maxTime: action._maxTime\r\n            });\r\n        case SETCURRENTTIME:\r\n            //console.log('SETCURRENTTIME:' + action._currentTime);\r\n            return Object.assign({}, state, {\r\n                _currentTime: action._currentTime\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n\r\n//export default scene;","import { combineReducers } from 'redux';\r\n\r\nimport scene from './scene'\r\nimport posenet from './posenet'\r\nimport countdown from './countdown'\r\n\r\nexport default combineReducers({\r\n    scene,\r\n    posenet,\r\n    countdown,\r\n    // 다른 리듀서를 만들게되면 여기에 넣어줌..\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { createStore } from 'redux';\r\nimport { Provider  } from 'react-redux';\r\nimport rootReducer from './reducers';\r\n\r\nconst appElement = document.getElementById('root');\r\n\r\n// 리덕스 개발자도구 적용\r\nconst devTools = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\r\nconst store = createStore(rootReducer, devTools);\r\n// const store = createStore(rootReducer);\r\n\r\nReactDOM.render(\r\n  <Provider store={store} >\r\n    <App/>\r\n  </Provider>,\r\n  appElement\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}