(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{106:function(e,t){},107:function(e,t){},108:function(e,t){},109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(10),i=n.n(r),c=(n(80),n(81),n(11)),s=n(65),l=n.n(s),u=n(6);function d(e){return{type:"SETSCENE",_changeScene:e}}function p(e){return{type:"SETSUBSCENE",_changeSubScene:e}}var m=n(135);function f(e){v(0==e?"onFitScreen":"onFullScreen")}function v(e){void 0!=window&&void 0!=window.parent&&(console.log("SendMessage parent:"+e),window.parent.postMessage(e,"*"))}function h(e){void 0!=window&&void 0!=window.HybridApp&&window.HybridApp.SetLandscapeMode(e)}n(98);var b=n(137),g=n(44),w=n.n(g),E=n(67),S=n.n(E),y=n(50);function _(e){console.log("playSound:"+e);var t=void 0;return(t=void 0==window.HybridApp?new Audio("./sound/"+e):new Audio("file:///android_asset/sound/"+e)).play(),t}function x(){_("Common_Button_Enabled_Touch.wav")}var k=Object(m.a)((function(e){return{root:{width:"100%"},video:{position:"relative",width:"100%",margin:"0"},rootFullScreen:{position:"fixed",left:"0%",top:"0%",width:"100%",height:"100%",backgroundColor:"black"},videoFullScreen:{position:"absolute",width:"auto",height:"100%",left:"0%",top:"0%",margin:"0"},contentsTitle:{position:"absolute",width:"100%",left:"0%",top:"0%",fontSize:"250%",textShadow:"2px 2px 5px black",color:"white",textAlign:"left",margin:"1% 1%"},contentBackBoard:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%",backgroundColor:"#00000088",margin:"0"},skipGuide:{position:"absolute",right:"1%",top:"1%",color:"white"},centerPlayButton:{position:"absolute",width:"50%",height:"50%",left:"25%",top:"40%",display:"none",opacity:"255"},contentsScreenMirror:{position:"absolute",width:"98px",height:"80px",right:"20px",bottom:"40px"},contentsScreenMirrorText:{position:"absolute",width:"98px",height:"20px",right:"20px",bottom:"20px",color:"white",fontSize:"120%",textAlign:"center"},centerPlayButtonText:{position:"absolute",width:"100%",top:"70%",left:"0",fontSize:"60%",margin:"5%",color:"white"},playButton:{position:"absolute",width:"50%",height:"50%",left:"0%",top:"40%",display:"none",opacity:"255"},skipButton:{position:"absolute",width:"50%",height:"50%",left:"50%",top:"40%",display:"none"},largeIcon:{fontSize:"2em",color:y.a[50]}}})),C={SetMaxTime:function(e){return{type:"SETMAXTIME",_maxTime:e}},SetCurrentTime:function(e){return{type:"SETCURRENTTIME",_currentTime:e}}},P=Object(u.b)((function(e){return{}}),C)((function(e){var t=e.title,n=e.videoUrl,r=e.enableContentsSkip,i=e.enableCountDown,c=e.enableContentsPause,s=e.onVideoPlayComplete,l=e.onVideoSkip,u=e.autoPlay,d=e.controls,p=e.enableTitleText,m=e.SetMaxTime,f=e.SetCurrentTime,v=e.enableFullScreen,h=e.enableScreenMirror,g=e.poster,E=k(),y=Object(o.useRef)(null),_=Object(o.useRef)(null),C=Object(o.useRef)(null),P=Object(o.useRef)(null);function O(){var e=C.current;void 0!=e?(f(parseInt(e.currentTime)),m(parseInt(e.duration))):console.log("videoRef null")}Object(o.useEffect)((function(){console.log("VideoPlay start:"+n),N(!u);var e=void 0;return 1==i&&(e=setInterval(O,1e3)),function(){void 0!=e&&clearInterval(e),console.log("VideoPlay finish:"+n)}}),[]);var N=function(e){var t="none";1==e&&(t="block"),void 0!=y.current&&(y.current.style.display=t),void 0!=_.current&&(_.current.style.display=t),void 0!=P.current&&(P.current.style.display=t)},T=function(){console.log("onPlayClick call");var e=C.current;void 0!=e?(void 0!=e&&e.play(),N(!1)):console.log("video null")},j=function(){console.log("onSkipClick call");var e=C.current;void 0!=e?(e.src="",N(!1),setTimeout((function(){void 0!=l&&l()}),500)):console.log("video null")},I=0==v?E.root:E.rootFullScreen,D=0==v?E.video:E.videoFullScreen;return a.a.createElement("div",{className:I,style:{zIndex:"-2"}},a.a.createElement("video",{className:D,onClick:function(){console.log("onVideoClick call");var e=C.current;if(void 0!=e)return 0==c?(void 0!=e&&e.play(),void console.log("disable contents skip")):void(e.paused?(e.play(),N(!1)):(e.pause(),N(!0)));console.log("videoRef null")},autoPlay:u,onEnded:function(){console.log("onVideoEnded call"),void 0!=s&&s()},ref:C,controls:d,poster:g},a.a.createElement("source",{src:n,type:"video/webm"}),"Your browser does not support the video tag."),1==p?a.a.createElement("span",{className:E.contentsTitle},t):void 0,function(){if(0!=c)return 1==r?a.a.createElement("div",null,a.a.createElement("div",{className:E.contentBackBoard,ref:P}),a.a.createElement("span",{className:E.skipGuide},"\ud130\uce58\ud558\uc5ec \uc815\uc9c0/\uc2a4\ud0b5 \uac00\ub2a5"),a.a.createElement("div",{className:E.playButton,ref:y},a.a.createElement(b.a,{"aria-label":"play",onClick:T},a.a.createElement(w.a,{className:E.largeIcon}),a.a.createElement("span",{className:E.centerPlayButtonText},"\uc7ac\uc0dd"))),a.a.createElement("div",{className:E.skipButton,ref:_},a.a.createElement(b.a,{"aria-label":"skip",onClick:j},a.a.createElement(S.a,{className:E.largeIcon}),a.a.createElement("span",{className:E.centerPlayButtonText},"\ub2e4\uc74c")))):a.a.createElement("div",null,a.a.createElement("div",{className:E.contentBackBoard,ref:P}),a.a.createElement("div",{className:E.centerPlayButton,ref:y},a.a.createElement(b.a,{"aria-label":"play",onClick:T},a.a.createElement(w.a,{className:E.largeIcon}),a.a.createElement("span",{className:E.centerPlayButtonText},"\uc7ac\uc0dd"))))}(),1==h?a.a.createElement("div",null,a.a.createElement("img",{onClick:function(){void 0!=window&&void 0!=window.HybridApp&&window.HybridApp.EnablingWiFiDisplay(),x()},className:E.contentsScreenMirror,src:"/home-training/img/screen-mirror-icon.png"}),a.a.createElement("span",{className:E.contentsScreenMirrorText},"TV \uc5f0\uacb0")):void 0)})),O={step1:{title:"\ucf54\uc5b4-\ubcf5\uadfc 15\ubd84",desc:"\ucf54\uc5b4-\ubcf5\uadfc 15\ubd84",type:"extra",web_url:"https://goli8111.github.io/home-training/video/intro.webm",url:"file:///android_asset/video/intro.webm",enableContentsPause:!0,enablePlayerView:!1,key:"intro"},step2:{title:"\ud560\ub85c\uc6b0\ubc14\ub514 \ud0a5",desc:"\ud560\ub85c\uc6b0\ubc14\ub514 \ud0a5 30\ucd08 X 1 set",type:"extra",web_url:"https://goli8111.github.io/home-training/video/hollow-body-kick-intro-1.webm",url:"file:///android_asset/video/hollow-body-kick-intro-1.webm",enableContentsPause:!0,enablePlayerView:!1,key:"hollow-body-kick"},step3:{title:"\ud560\ub85c\uc6b0\ubc14\ub514 \ud0a5 Set",desc:"\ud560\ub85c\uc6b0\ubc14\ub514 \ud0a5 30\ucd08 X 1 set",type:"set",web_url:"https://goli8111.github.io/home-training/data/hollow-body-kick-set-1.webm",url:"file:///android_asset/video/hollow-body-kick-set-1.webm",enableContentsPause:!1,enablePlayerView:!0,key:"hollow-body-kick"},step4:{title:"\uc2a4\ud30c\uc774\ub354 \ud50c\ub7ad\ud06c",desc:"\uc2a4\ud30c\uc774\ub354 \ud50c\ub7ad\ud06c 30\ucd08 X 1 set",type:"extra",web_url:"https://goli8111.github.io/home-training/video/spider-plank-intro-1.webm",url:"file:///android_asset/video/spider-plank-intro-1.webm",enableContentsPause:!0,enablePlayerView:!1,key:"hollow-body-kick"},step5:{title:"\uc2a4\ud30c\uc774\ub354 \ud50c\ub7ad\ud06c SET",desc:"\uc2a4\ud30c\uc774\ub354 \ud50c\ub7ad\ud06c 30\ucd08 X 1 set",type:"set",web_url:"https://goli8111.github.io/home-training/video/spider-plank-set-1.webm",url:"file:///android_asset/video/spider-plank-set-1.webm",enableContentsPause:!1,enablePlayerView:!0,key:"hollow-body-kick"},step6:{title:"",desc:"\uacb0\uacfc",type:"extra",web_url:"https://goli8111.github.io/home-training/video/core-abs-result.webm",url:"file:///android_asset/video/core-abs-result.webm",enableContentsPause:!1,enablePlayerView:!1,key:"result"}};function N(){var e=Date.now(),t=null;do{t=Date.now()}while(t-e<0)}function T(e){return void 0!=window&&(void 0!=window.HybridApp&&window.HybridApp.IsVideoFileExist(e))}function j(e){for(var t=[],n=1;n<100;n++){var o="step"+n,a=e[o];if(void 0==a)break;if("set"==a.type){var r={};r.step=n,void 0==window.HybridApp?(r.valid=!1,r.url=e[o].web_url):(r.valid=window.HybridApp.IsVideoFileExist(n),r.url=window.HybridApp.GetVideoFilePath(n)),r.desc=e[o].desc,r.title=e[o].title,t.push(r)}}return t}function I(e,t){return D(j(e),t)}function D(e,t){var n=[];return e.forEach((function(e){e.valid==t&&n.push(e)})),n}var R=Object(m.a)((function(e){return{root:{position:"relative",width:"100%"},contentsTitle_fail:{position:"relative",width:"100%",left:"0%",color:"red"},contentsTitle_fail_desc:{position:"relative",width:"100%",left:"0%",color:"gray"},video:{position:"relative",width:"100%",margin:"0"},divLine:{border:"1px solid",color:"#DDDDDD",width:"95%"}}})),A=void 0,B={SetSubScene:p,RefreshIntro:function(){return{type:"REFRESHINTRO"}}},M=Object(u.b)((function(e){return{_currentSubScene:e.scene._currentSubScene,_refreshIntro:e.scene._refreshIntro}}),B)((function(e){e._currentSubScene,e._refreshIntro;var t=e.RefreshIntro,n=R(),r=a.a.useState(!1),i=Object(c.a)(r,2);i[0],i[1];Object(o.useEffect)((function(){void 0!=(A=I(O,!0))&&A.length}));var s=function(e){var n,o=e.target.getAttribute("data-index");console.log("onDeleteVideo call index:"+o),n=parseInt(o),void 0!=window&&void 0!=window.HybridApp&&(window.HybridApp.DeleteVideoFile(n),N()),t(),x()},l=function(e,t,o,r,i){return a.a.createElement("div",{key:t},a.a.createElement("br",null),i?function(e,t,o){return a.a.createElement("div",{key:t},a.a.createElement("div",{className:"contentsTitle_left"},a.a.createElement("div",{className:n.contentsTitle_success_icon},a.a.createElement("img",{onClick:s,"data-index":e,className:"contentsTitle_success_delete_icon",src:"/home-training/img/result-scene-delete-icon.png"})),a.a.createElement("span",{className:"contentsTitle_success_text"},t)),a.a.createElement("video",{className:n.video,autoPlay:!1,controls:!0,poster:"/home-training/img/HomeTrainingQuest_icon.png"},a.a.createElement("source",{src:o,type:"video/mp4",id:"SelectSoundOutput"}),"Your browser does not support the video tag."))}(e,o,r):function(e){return a.a.createElement("div",{key:e},a.a.createElement("div",{className:"contentsTitle_fail_left"},a.a.createElement("span",{className:n.contentsTitle_fail},e)),a.a.createElement("div",{className:"contentsTitle_fail_center"},a.a.createElement("span",{className:n.contentsTitle_fail_desc},"\uc601\uc0c1 \uae30\ub85d \uc5c6\uc74c")))}(o))};return a.a.createElement("div",{key:"FullScreenResult",className:n.root},a.a.createElement("div",{className:"result_contentsSummery"},a.a.createElement("span",{className:"result_contentsSummery_left"},"\ub0b4\uae30\ub85d"),a.a.createElement("span",{className:"result_contentsSummery_right"},function(){for(var e=j(O),t=e.length,n=0,o=0;o<e.length;o++)1==e[o].valid&&n++;return a.a.createElement("div",null,a.a.createElement("span",{style:{color:"green"}},n," Set"),"\uae30\ub85d / \ucd1d ",t," Set")}())),a.a.createElement("br",null),a.a.createElement("div",{className:"result_videoRoot"},a.a.createElement("div",{className:"result_videoContainer"},function(){var e=[],t=j(O);if(void 0!=t){console.log("fullSourceList:"+t.length);for(var n=0;n<t.length;n++)e.push(l(t[n].step,t[n].title,t[n].desc,t[n].url,t[n].valid))}return e}(),a.a.createElement("hr",{className:n.divLine}))))}));function V(e){return{type:"SETPOSENETPOSE",_posenetPose:e}}function F(e){return console.log("ClosePosenet action call:"+e),{type:"CLOSEPOSENET",_closePosenet:e}}var z=n(36),H=(n(61),Object(m.a)((function(e){return{root:{position:"fixed",left:"0%",top:"0%",width:"100%",height:"100%"},contentsTitle:{position:"absolute",left:"5%",top:"5%",fontSize:"250%",textShadow:"2px 2px 5px black",color:"red"},contentsFailText:{position:"absolute",left:"5%",top:"20%",fontSize:"300%",textShadow:"2px 2px 5px black",color:"white"},retryButton:{position:"absolute",left:"60%",top:"5%",width:"30%",height:"20%",fontSize:"150%",opacity:.5},OKButton:{position:"absolute",left:"60%",top:"35%",width:"30%",height:"20%",fontSize:"150%",opacity:.5}}}))),L={SetSubScene:p},U=Object(u.b)((function(e){return{_currentSubScene:e.scene._currentSubScene}}),L)((function(e){e.SetSubScene,e._currentSubScene;var t=e.failureCount,n=e.onOKClick,o=e.onRetryClick,r=H();return a.a.createElement("div",{className:r.root},a.a.createElement("span",{className:r.contentsTitle},"\ub0a8\uc740 \ud544\uc694"),a.a.createElement("span",{className:r.contentsFailText},t+"SET"),a.a.createElement("div",{className:"contents_result_retry",onClick:o},a.a.createElement("img",{src:"/home-training/img/retry_icon.png"}),a.a.createElement("span",null,"\uc7ac\ub3c4\uc804")),a.a.createElement("div",{className:"contents_result_ok",onClick:n},a.a.createElement("img",{src:"/home-training/img/ok_icon.png"}),a.a.createElement("span",null,"\ud655\uc778")))})),W=n(139),K=Object(m.a)((function(e){return{root:{position:"fixed",left:"0%",top:"0%",width:"100%",height:"100%"},contentsTitle:{position:"absolute",left:"5%",top:"5%",fontSize:"250%",textShadow:"2px 2px 5px black",color:"green"},OKButton:{position:"absolute",left:"60%",top:"35%",width:"30%",height:"20%",fontSize:"150%",opacity:.5}}})),X={SetSubScene:p},q=Object(u.b)((function(e){return{_currentSubScene:e.scene._currentSubScene}}),X)((function(e){e.SetSubScene,e._currentSubScene;var t=e.onOKClick,n=K();return a.a.createElement("div",{className:n.root},a.a.createElement("span",{className:n.contentsTitle},"\uc601\uc0c1 \uae30\ub85d \uc644\ub8cc"),a.a.createElement(W.a,{className:n.OKButton,onClick:t,variant:"contained",color:"secondary"},"\ud655\uc778"))})),G=n(13),Y=n.n(G),J=n(24),Q=n(45),$=n(46),Z=n(31),ee=n(47),te=n(49),ne=n(28),oe=!0,ae={zIndex:"0",position:"fixed",right:"0%",bottom:"0%",width:"30%"},re={height:"auto"},ie={height:"10%"},ce={zIndex:"0",position:"fixed",left:"0%",top:"0%",width:"100%"},se={height:"auto"},le={height:"100%"},ue={position:"absolute",zIndex:"1",left:"0%",top:"0%",width:"98%",height:"100%",margin:"1%",textShadow:"2px 2px 5px black",color:"white"},de={textAlign:"center",fontSize:"100%"},pe={textAlign:"right",fontSize:"130%"},me=!1,fe=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(e){var o;return Object(Q.a)(this,n),(o=t.call(this,e,n.defaultProps)).getCanvas=function(e){o.canvas=e},o.getCanvasOverlay=function(e){o.canvasOverlay=e},o.getVideo=function(e){o.video=e},o.onNextCamera=function(){oe=!oe,console.log("user camera flag : "+oe),o.playCamera()},o.getCameraInvalid=function(){var e;if(void 0!=o.props._posenetPose&&!(o.props.minPoseConfidence<o.props._posenetPose.score))return e=1==o.props.showMiniVideo?Object.assign({},ue,de):Object.assign({},ue,pe),a.a.createElement("span",{style:e},"\ud654\uba74 \uc548\uc73c\ub85c \ub4e4\uc5b4\uc624\uc138\uc694.")},o.stopCamera=o.stopCamera.bind(Object(Z.a)(o)),o}return Object($.a)(n,[{key:"componentDidMount",value:function(){var e=Object(J.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me=!1,e.prev=1,e.next=4,ne.b();case 4:this.posenet=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error("PoseNetCamera failed to load");case 10:return e.prev=10,e.next=13,this.setupCamera();case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(10),new Error("This browser does not support video capture, or this device does not have a camera");case 18:case"end":return e.stop()}}),e,this,[[1,7],[10,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){me=!0,this.stopCamera()}},{key:"setupCamera",value:function(){var e=Object(J.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){e.kind,console.log(e.kind+": "+e.label+", id = "+e.deviceId)}))})).catch((function(e){console.log(e.name+": "+e.message)})),this.playCamera();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"playCamera",value:function(){var e=Object(J.a)(Y.a.mark((function e(){var t,n,o,a=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.stream&&window.stream.getTracks().forEach((function(e){e.stop()})),t=this.video,1920,1080,n="user",0==oe&&(n="environment"),e.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:n,frameRate:60,width:{exact:1920},height:{exact:1080},aspectRatio:{exact:1920/1080}}});case 8:return o=e.sent,window.stream=o,t.srcObject=o,e.abrupt("return",new Promise((function(e){t.onloadedmetadata=function(){t.play(),a.updateCamera(),e(t)}})));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopCamera",value:function(){console.log("stopCamera call");var e=this.video;void 0!=e&&(e.pause(),e.src="",void 0!=e.srcObject&&(e.srcObject.getTracks()[0].stop(),e.srcObject=void 0),console.log("video off"))}},{key:"updateCamera",value:function(){var e=this.canvas;if(void 0!=e){var t=e.getContext("2d");if(void 0!=t){var n=this.video;void 0!=n&&(0==this.props.showVideo?n.style.display="none":n.style.display="block",this.updateCameraFrame(t))}}}},{key:"updateCameraFrame",value:function(e){var t=this,n=this.video,o=this.posenet,a=0,r=function(){var i=Object(J.a)(Y.a.mark((function i(){var c,s,l,u;return Y.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(1!=me){i.next=2;break}return i.abrupt("return");case 2:if(c=t.canvas,s=(new Date).getTime(),1==(l=s-a>1e3)&&(a=s),1!=l){i.next=18;break}return i.prev=8,i.next=11,o.estimateSinglePose(n,.5,!0,16);case 11:u=i.sent,t.props.onPosenetPose(u),i.next=18;break;case 15:i.prev=15,i.t0=i.catch(8),console.log("posenet detection error",i.t0);case 18:if(1==t.props.showDebugVideo&&void 0!=c&&(n.videoWidth==c.width&&n.videoHeight==c.height||(c.width=n.videoWidth,c.height=n.videoHeight,e.width=n.videoWidth,e.height=n.videoHeight),e.clearRect(0,0,c.width,c.height),e.save(),e.drawImage(n,0,0),e.restore()),"start"!=t.props._closeCamera){i.next=23;break}return t.stopCamera(),t.props.onCloseCamera("complete"),i.abrupt("return");case 23:requestAnimationFrame(r);case 24:case"end":return i.stop()}}),i,null,[[8,15]])})));return function(){return i.apply(this,arguments)}}();r()}},{key:"render",value:function(){var e,t;return 1==this.props.showMiniVideo?(e=Object.assign({},ae,re),t=Object.assign({},ae,ie)):(e=Object.assign({},ce,se),t=Object.assign({},ce,le)),a.a.createElement("div",null,a.a.createElement("video",{id:"videoCamera",style:e,src:"",playsInline:!0,ref:this.getVideo}),a.a.createElement("canvas",{style:e,ref:this.getCanvas}),a.a.createElement("div",{style:t},this.getCameraInvalid()))}}]),n}(o.Component);fe.defaultProps={showVideo:!1,showDebugVideo:!1,showMiniVideo:!1,minPoseConfidence:.3,loadingText:"Loading...please be patient..."};var ve=fe=Object(u.b)((function(e){return{_current_scene:e.scene._current_scene,_posenetPose:e.posenet._posenetPose}}),(function(e){return{onPosenetPose:function(t){return e(V(t))},onClosePosenet:function(t){return e(F(t))}}}))(fe);n(4);function he(e){var t=Math.pow(e.x-0,2)+Math.pow(e.y-0,2);return Math.sqrt(t)}function be(e,t){return(e.x*t.x+e.y*t.y)/(he(e)*he(t))}var ge,we;function Ee(e){return[e.x,e.y]}function Se(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.forEach((function(e){if(e.score>=t){var r=e.position,i=r.x,c=r.y;o.beginPath(),o.arc(i*a,c*a,3,0,2*Math.PI),o.fillStyle=n,o.fill()}}))}function ye(e,t,n,o,a,r){var i=Object(c.a)(e,2),s=i[0],l=i[1],u=Object(c.a)(t,2),d=u[0],p=u[1];r.beginPath(),function(e,t,n,o,a){a.moveTo(e,t),a.lineTo(n,o);var r=n-e,i=o-t,c=Math.atan2(i,r);a.moveTo(n,o),a.lineTo(n-10*Math.cos(c-Math.PI/6),o-10*Math.sin(c-Math.PI/6)),a.moveTo(n,o),a.lineTo(n-10*Math.cos(c+Math.PI/6),o-10*Math.sin(c+Math.PI/6))}(s*a,l*a,d*a,p*a,r),r.lineWidth=o,r.strokeStyle=n,r.stroke()}function _e(e,t,n,o,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=ne.a(e,t);i.forEach((function(e){ye(Ee(e[0].position),Ee(e[1].position),n,o,r,a)}))}function xe(e,t,n,o){var a=Object(c.a)(e,2),r=a[0],i=a[1],s=Object(c.a)(t,2),l=s[0],u=s[1];o.font="20px Arial",o.fillStyle=n,o.textAlign="center";var d={};d.x=l-r,d.y=u-i;var p=function(e){var t={x:0,y:-1},n=be(t,e),o=parseInt(Math.acos(n)*(180/Math.PI));return e.x<0&&(o+=180),o}(d),m=(r+l)/2,f=(i+u)/2;o.fillText("("+p+")",m,f)}function ke(e,t,n,o,a){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var r=ne.a(e,t);r.forEach((function(e){xe(Ee(e[0].position),Ee(e[1].position),n,o)}))}var Ce=0,Pe="yellow",Oe=32;function Ne(){if(!ge)return ge=Date.now(),we=0,void(Ce=0);(Date.now()-ge)/1e3>=1?(ge=Date.now(),we=Ce,Ce=0):Ce++}function Te(e){e.fillStyle=Pe,e.font=Oe+"px Arial",e.fillText(we,10,Oe+10)}var je={zIndex:"0",position:"fixed",right:"0%",bottom:"0%",width:"30%"},Ie={height:"30%"},De={height:"30%"},Re={zIndex:"0",position:"fixed",left:"0%",top:"0%",width:"100%"},Ae={height:"auto"},Be={height:"100%"},Me={position:"absolute",zIndex:"1",left:"0%",top:"0%",width:"100%",height:"100%",margin:"0 auto",textShadow:"2px 2px 5px black",color:"white"},Ve={textAlign:"left",fontSize:"150%"},Fe={textAlign:"center",fontSize:"80%"},ze={textAlign:"right",fontSize:"130%"},He={textAlign:"center",fontSize:"80%"},Le=!1,Ue=function(e){Object(te.a)(n,e);var t=Object(ee.a)(n);function n(e){var o;return Object(Q.a)(this,n),(o=t.call(this,e,n.defaultProps)).getCanvas=function(e){o.canvas=e},o.getVideo=function(e){o.video=e},o.getCameraScan=function(){var e;if(e=1==o.props.showMiniVideo?Object.assign({},Me,Fe):Object.assign({},Me,Ve),void 0==o.props._posenetPose)return a.a.createElement("span",{style:e},"\uce74\uba54\ub77c \uc778\uc2dd \uc911...")},o.getCameraInvalid=function(){var e;if(void 0!=o.props._posenetPose&&!(o.props.minPoseConfidence<o.props._posenetPose.score))return e=1==o.props.showMiniVideo?Object.assign({},Me,He):Object.assign({},Me,ze),a.a.createElement("span",{style:e},"\ud654\uba74 \uc548\uc73c\ub85c \ub4e4\uc5b4\uc624\uc138\uc694.")},o.stopCamera=o.stopCamera.bind(Object(Z.a)(o)),console.log("PoseNetCamera init"),o}return Object($.a)(n,[{key:"componentDidMount",value:function(){var e=Object(J.a)(Y.a.mark((function e(){var t=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le=!1,e.prev=1,e.next=4,this.setupCamera();case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),new Error("This browser does not support video capture, or this device does not have a camera");case 9:return e.prev=9,e.next=12,ne.b();case 12:this.posenet=e.sent,e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(9),new Error("PoseNetCamera failed to load");case 18:return e.prev=18,setTimeout((function(){t.setState({loading:!1})}),200),e.finish(18);case 21:this.detectPose();case 22:case"end":return e.stop()}}),e,this,[[1,6],[9,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){Le=!0,console.log("PoseNetCamera componentWillUnmount"),this.stopCamera()}},{key:"setupCamera",value:function(){var e=Object(J.a)(Y.a.mark((function e(){var t,n,o,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return(t=this.video).style.display="none",t.style.transform="rotatey(180deg)",n=window.innerWidth,o=window.innerHeight,e.next=9,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:n,height:o}});case 9:return a=e.sent,t.srcObject=a,e.abrupt("return",new Promise((function(e){t.onloadedmetadata=function(){t.play(),e(t)}})));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopCamera",value:function(){console.log("stopCamera call");var e=this.video;void 0!=e&&(e.pause(),e.src="",void 0!=e.srcObject&&(e.srcObject.getTracks()[0].stop(),e.srcObject=void 0),console.log("video off"))}},{key:"detectPose",value:function(){var e=this.canvas;if(void 0!=e){var t=e.getContext("2d");if(void 0!=t)this.video.style.display="none",this.poseDetectionFrame(t)}}},{key:"poseDetectionFrame",value:function(e){var t=this,n=this.props,o=n.algorithm,a=n.imageScaleFactor,r=n.flipHorizontal,i=n.outputStride,c=n.minPoseConfidence,s=n.minPartConfidence,l=n.maxPoseDetections,u=n.nmsRadius,d=n.showDebugVideo,p=n.showPoints,m=n.showSkeleton,f=n.showSkeletonDegree,v=n.skeletonColor,h=n.skeletonDegreeColor,b=n.skeletonLineWidth,g=this.posenet,w=this.video,E=(new Date).getTime(),S=function(){var n=Object(J.a)(Y.a.mark((function n(){var y,_,x,k,C;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=Le){n.next=2;break}return n.abrupt("return");case 2:if(y=(new Date).getTime(),1==(_=y-E>1e3)&&(E=y),n.prev=6,x=[],1!=_){n.next=22;break}n.t0=o,n.next="multi-pose"===n.t0?12:"single-pose"===n.t0?16:22;break;case 12:return n.next=14,g.estimateMultiplePoses(w,a,r,i,l,s,u);case 14:return x=n.sent,n.abrupt("break",22);case 16:return n.next=18,g.estimateSinglePose(w,a,r,i);case 18:return k=n.sent,t.props.onPosenetPose(k),x.push(k),n.abrupt("break",22);case 22:void 0!=(C=t.canvas)&&(e.clearRect(0,0,C.width,C.height),e.save(),e.scale(-1,1),e.translate(-C.width,0),e.drawImage(w,w.left,w.top,w.left+C.width/2,w.top+C.height),e.restore(),1==d&&(Ne(),e.save(),x.forEach((function(t){var n=t.score,o=t.keypoints;n>=c&&(p&&Se(o,s,v,e),m&&_e(o,s,v,b,e),f&&ke(o,s,h,e))})),e.restore(),Te(e))),n.next=29;break;case 26:n.prev=26,n.t1=n.catch(6),console.log("posenet detection error");case 29:requestAnimationFrame(S);case 30:case"end":return n.stop()}}),n,null,[[6,26]])})));return function(){return n.apply(this,arguments)}}();S()}},{key:"render",value:function(){var e,t;return 1==this.props.showMiniVideo?(e=Object.assign({},je,Ie),t=Object.assign({},je,De)):(e=Object.assign({},Re,Ae),t=Object.assign({},Re,Be)),a.a.createElement("div",null,a.a.createElement("video",{id:"videoCamera",style:e,src:"",playsInline:!0,ref:this.getVideo}),a.a.createElement("div",{style:t},this.getCameraInvalid()),a.a.createElement("canvas",{style:{position:"fixed",left:"0%",top:"0%",zIndex:"1"},ref:this.getCanvas}))}}]),n}(o.Component);Ue.defaultProps={flipHorizontal:!0,algorithm:"single-pose",showMiniVideo:!1,showVideo:!0,showDebugVideo:!1,showSkeleton:!1,showPoints:!1,showSkeletonDegree:!1,minPoseConfidence:.7,minPartConfidence:.5,maxPoseDetections:2,nmsRadius:20,outputStride:16,imageScaleFactor:.5,skeletonColor:"#ffadea",skeletonDegreeColor:"#ff0000",skeletonLineWidth:6,loadingText:"Loading...please be patient..."};Ue=Object(u.b)((function(e){return{_currentScene:e.scene._currentScene,_closePosenet:e.posenet._closePosenet,_posenetPose:e.posenet._posenetPose}}),(function(e){return{onPosenetPose:function(t){return e(V(t))},onClosePosenet:function(t){return e(F(t))}}}))(Ue);var We={position:"absolute",zIndex:"1",left:"0%",top:"0%",width:"100%",height:"100%",textAlign:"left",margin:"0 auto",fontSize:"150%",textShadow:"2px 2px 5px black",color:"white"},Ke={position:"absolute",zIndex:"1",left:"0%",top:"0%",width:"100%",height:"100%",textAlign:"right",margin:"0 auto",fontSize:"130%",textShadow:"2px 2px 5px black",color:"white"},Xe={position:"fixed",zIndex:"1",left:"0%",top:"0%",width:"100%",height:"100%"},qe={setScene:d},Ge=(Object(u.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_countdown:e.countdown._countdown}}),qe)((function(e){e.setScene;var t=e._posenetPose,n=(e._countdown,e.minPoseConfidence);Object(o.useEffect)((function(){}));return a.a.createElement("div",{style:Xe},a.a.createElement("span",{style:We},"\uce74\uba54\ub77c \uc778\uc2dd \uc911..."),function(){if(void 0!=t&&!(n<t.score))return a.a.createElement("span",{style:Ke},"\ud654\uba74 \uc548\uc73c\ub85c \ub4e4\uc5b4\uc624\uc138\uc694.")}())})),Object(m.a)((function(e){return{root:{width:"100%",maxHeight:"100%"},contentsTitle:{position:"absolute",left:"5%",top:"5%",fontSize:"250%",textShadow:"2px 2px 5px black",color:"red"},contentsResult:{position:"fixed",left:"0%",top:"30%",width:"100%",height:"auto",fontSize:"250%",textShadow:"2px 2px 5px black",textAlign:"center",color:"white"}}}))),Ye=0,Je=0,Qe=void 0,$e={SetSubScene:p,SetPosenetPose:V,InvalidPosenet:function(e){return{type:"INVALIDPOSENET",_invalidPoseKey:e}},ValidPosenet:function(e){return{type:"VALIDPOSENET",_validPoseKey:e}},ClosePosenet:F},Ze=Object(u.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_currentSubScene:e.scene._currentSubScene,_recordState:e.posenet._recordState}}),$e)((function(e){e.SetSubScene,e._currentSubScene;var t=e.SetPosenetPose,n=(e.InvalidPosenet,e.ValidPosenet,e._posenetPose),r=e.step,i=e.title,c=e.desc,s=e._recordState,l=Ge();function u(){var e={score:1};t(e)}Object(o.useEffect)((function(){var e;return e=setInterval(u,1e3),function(){void 0!=e&&clearInterval(e)}})),Object(o.useEffect)((function(){void 0!=n&&(.3<n.score?Je++:Ye++,console.log("PoseCameraRecord _recordState:"+s),1==s?d():p())}),[n]),Object(o.useEffect)((function(){return console.log("PoseCameraRecord start:"+r),Ye=0,Je=0,Qe=r,i,c,function(){p()}}),[]);var d=function(){!function(e){if(void 0!=window&&void 0!=window.HybridApp)window.HybridApp.StartCameraRecord(e),N()}(r)},p=function(){console.log(" stopVideoRecord call");var e=0,t=Je+Ye;0!=t&&(e=100*Je/(Je+Ye)),console.log("percent:"+e+", total:"+t),function(e,t,n,o){void 0!=window&&void 0!=window.HybridApp&&(window.HybridApp.StopCameraRecord(),N(),0==e&&setTimeout((function(){window.HybridApp.DeleteVideoFile(t)}),1e3))}(50<e,Qe)};return a.a.createElement("div",{key:"PoseNetMiniCamera"},function(){if(0==s)return 1==T(Qe)?a.a.createElement("span",{className:l.contentsResult},"\uae30\ub85d \uc131\uacf5"):a.a.createElement("span",{className:l.contentsResult},"\uae30\ub85d \uc2e4\ud328")}())})),et=Object(m.a)((function(e){return{root:{width:"100%",maxHeight:"100%",backgroundColor:"black"},videoContainer:{width:"100%",position:"relative"},progressContainer:{position:"fixed",zIndex:"1",left:"2%",top:"20%",width:"15%",height:"15%",margin:"0"}}})),tt=0,nt={InvalidPosenetClear:function(){return{type:"INVALIDPOSENET_CLEAR"}},SetCameraRecord:function(e){return console.log("SETCAMERARECORD action call:"+e),{type:"SETCAMERARECORD",_recordState:e}},setScene:d},ot=Object(u.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_maxTime:e.countdown._maxTime,_currentTime:e.countdown._currentTime}}),nt)((function(e){e._posenetPose;var t=e.setScene,n=(e.InvalidPosenetClear,e.SetCameraRecord),o=e._currentTime,r=e._maxTime,i=et(),s=a.a.useState(1),l=Object(c.a)(s,2),u=l[0],d=l[1],p=function(e){return O["step"+e]},m=function(e,t,n){var o=t.replace(".mp4",".jpg");return o=t.replace(".webm",".jpg"),a.a.createElement(P,{key:t,title:e,enableContentsSkip:!0,enableContentsPause:n,enableCountDown:!0,onVideoPlayComplete:v,onVideoSkip:h,videoUrl:t,autoPlay:!0,enableTitleText:!0,enableFullScreen:!0,enableScreenMirror:n,poster:o})},f=function(){var e=u+1;void 0!=p(e)&&b(e)},v=function(){console.log("onVideoEnded call");var e=p(u);void 0!=e&&(n(!1),e.enablePlayerView?setTimeout((function(){f()}),2e3):f())},h=function(){console.log("onVideoSkip call"),void 0!=p(u)&&f()};function b(e){var t=u,n=e;1!=T(n+1)?(d(n),console.log("change scene type:"+t+"=>"+n)):b(n+2)}var g=function(){var e=void 0,t=void 0,n=p(u);return void 0!=n&&(e=n.title,t=n.desc),a.a.createElement("div",{key:"PoseNetMiniCamera"},a.a.createElement(Ze,{step:u,title:e,desc:t}))},w=function(){console.log("onOKClick"),x(),d(1),t("IntroScene")},E=function(){console.log("onRetryClick"),x(),tt=0,b(1)},S=function(){var e=I(O,!1).length;return 0==e?a.a.createElement("div",{key:"ResultSuccess"},a.a.createElement(q,{onOKClick:w})):a.a.createElement("div",{key:"ResultFailure"},a.a.createElement(U,{failureCount:e,onOKClick:w,onRetryClick:E}))};return a.a.createElement("div",{className:i.root},a.a.createElement("div",{className:i.videoContainer},function(){var e=[],t=p(u);if(void 0!=t){var o=t.url;void 0==window.HybridApp&&(o=t.web_url),e.push(m(t.title,o,t.enableContentsPause)),void 0==p(u+1)&&e.push(S()),1==t.enablePlayerView&&(tt!=u&&(n(!0),tt=u),e.push(g()))}return e}()),function(){var e=p(u);if(void 0!=e&&0!=e.enablePlayerView&&void 0!=o&&void 0!=r&&1!=isNaN(o)&&1!=isNaN(r)){var t=parseInt(r-o);if(!(t<=0))return a.a.createElement("div",{className:i.progressContainer},a.a.createElement(z.a,{value:t,maxValue:r,text:"".concat(t),styles:Object(z.b)({textColor:"#ffffff",pathColor:"#ffffff",trailColor:"#ffffff11",textSize:"40px"})}))}}())})),at=Object(m.a)((function(e){return{root:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},videoContainer:{position:"absolute",height:"100%",width:"100%",left:"0%",top:"0%"},contentsLoading:{position:"absolute",zIndex:"1",left:"0%",top:"0%",width:"100%",height:"100%",textAlign:"left",margin:"0 auto",fontSize:"150%",textShadow:"2px 2px 5px black",color:"white"},progressContainer:{position:"absolute",zIndex:"1",left:"0%",top:"0%",width:"20%",height:"20%",marginLeft:"5%",marginTop:"10%"}}})),rt=0,it={setScene:d},ct=Object(u.b)((function(e){return{_posenetPose:e.posenet._posenetPose}}),it)((function(e){var t=e._posenetPose,n=e.setScene,r=at();Object(o.useEffect)((function(){console.log("_posenetPose effect call:"+rt),void 0!=t&&(rt>=4?n("Play"):.3<=t.score?i():c())}),[t]);var i=function(){rt++},c=function(){rt=0};return a.a.createElement("div",{className:r.root},a.a.createElement("div",{className:r.videoContainer},a.a.createElement("div",{className:r.progressContainer},a.a.createElement(z.a,{value:rt,maxValue:4,text:"".concat(25*rt,"%"),styles:Object(z.b)({textColor:"#ffffff",pathColor:"#ffffff",trailColor:"#ffffff11",textSize:"40px"})})),a.a.createElement("span",{className:r.contentsLoading},"\uce74\uba54\ub77c \uc778\uc2dd \uc911..."),a.a.createElement("div",{key:"PoseNetScanCamera"},a.a.createElement(ve,{showMiniVideo:!1,showDebugVideo:!0,minPoseConfidence:.3}))))})),st={step3:{title:"\ub9c8\uc2a4\ud130 \ud53c\ub4dc\ubc31",desc:"\ub9c8\uc2a4\ud130 \ud53c\ub4dc\ubc31",url:"file:///android_asset/video/feedback-result.webm",web_url:"https://goli8111.github.io/home-training/video/feedback-result.mp4",comments:["0:7","\ud560\ub85c\uc6b0\ubc14\ub514 \ud0a5","\uadfc\uc9c0\uad6c\ub825 \ud5a5\uc0c1\uc744 \uc704\ud574, \uba48\ucd94\uc9c0 \ub9d0\uace0 \ub04a\uc784\uc5c6\uc774 \uc6c0\uc9c1\uc774\uc154\uc57c \ud569\ub2c8\ub2e4.","0:17","\uc2a4\ud30c\uc774\ub354 \ud50c\ub7ad\ud06c","\uc6b4\ub3d9 \uc18d\ub3c4\ub97c \ub0ae\ucd94\uc154\ub3c4 \ub418\ub2c8, \ubb34\ub98e\uc744 \ud314\uafc8\uce58 \ub192\uc774\uae4c\uc9c0 \ub4e4\uc5b4 \uc62c\ub9ac\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."]}},lt=(n(109),Object(m.a)((function(e){return{root:{width:"100%",maxHeight:"100%"},videoRoot:{position:"relative",top:"5%",height:"95%",width:"100%"},videoContainer:{position:"relative",width:"100%",margin:"5px"},video:{position:"relative",width:"100%",margin:"0"},divLine:{border:"1px solid",color:"#DDDDDD",width:"95%"}}}))),ut={SetSubScene:p},dt=Object(u.b)((function(e){return{_currentSubScene:e.scene._currentSubScene}}),ut)((function(e){var t=e.resultState,n=lt();Object(o.useEffect)((function(){}));var r=function(e,t,o){var r=t.replace(".mp4",".jpg");return r=t.replace(".webm",".jpg"),a.a.createElement("div",{key:e},a.a.createElement("div",{className:"contentsTitle_left"}),a.a.createElement("video",{className:n.video,autoPlay:!1,controls:!0,poster:r},a.a.createElement("source",{src:t,type:"video/mp4",id:"SelectSoundOutput"}),"Your browser does not support the video tag."),a.a.createElement("div",{className:"contentsTitle_left"},function(e){if(void 0!=e){for(var t=[],n=parseInt(e.length/3),o=0;o<n;o++){0!=o&&t.push(a.a.createElement("br",{key:e}));var r=3*o,i=e[r],c=e[r+1],s=e[r+2];t.push(a.a.createElement("span",{key:i+s+"0",className:"contentsTitle_success_time"},i," ")),t.push(a.a.createElement("span",{key:i+s+"1",className:"contentsTitle_success_text"},c)),t.push(a.a.createElement("div",{key:i+s+"2",className:"contentsTitle_success_sub_text"},"\xa0\xa0\xa0\xa0",s))}return t}}(o)),a.a.createElement("hr",{className:n.divLine}))};return a.a.createElement("div",{key:"FeedbackScene",className:n.root},a.a.createElement("div",{className:"contentsSummery"},a.a.createElement("span",{className:"contentsSummery_title"},"\ub9c8\uc2a4\ud130 \ucf54\uba58\ud2b8 (\ud074\ub9ac\uc5b4)"),a.a.createElement("div",{className:"contentsSummery_result"},t?a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,"\uc57d\uac04\uc758 \ub3d9\uc791 \uad50\uc815\uc774 \ud544\uc694\ud558\uc9c0\ub9cc, \uc77c\ub2e8 \ud018\uc2a4\ud2b8 \ud074\ub9ac\uc5b4! \uc218\uace0 \ub9ce\uc73c\uc168\uc2b5\ub2c8\ub2e4."))):a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,"\uc544\uc27d\uc2b5\ub2c8\ub2e4."),a.a.createElement("li",null,"\ucf54\uba58\ud2b8\ub97c \uc77d\uc5b4\ubcf4\uc2dc\uace0 \ub2e4\uc2dc \ub3c4\uc804\ud558\uc138\uc694.")))),a.a.createElement("hr",{className:n.divLine}),a.a.createElement("div",{className:n.videoRoot},a.a.createElement("div",{className:n.videoContainer},function(){var e=[];return Object.keys(st).forEach((function(t,n){e.push(r(st[t].desc,st[t].url,st[t].comments))})),e}()))))})),pt=Object(m.a)((function(e){return{root:{position:"fixed",backgroundColor:"#FFFFFF88",width:"100%",height:"65px",bottom:"0px",left:"0%"}}})),mt=function(e){var t=e.onClick,n=e.rewardCategory,o=e.rewardExp,r=pt();return a.a.createElement("div",{className:r.root},a.a.createElement("div",{onClick:t,className:"quest_reward_main_button"},a.a.createElement("span",null,"\uc644\ub8cc\ud558\uace0 \ubcf4\uc0c1 \ubc1b\uae30")),a.a.createElement("div",{onClick:t,className:"quest_reward_button"},a.a.createElement("img",{src:function(){switch(n){case"strength":return"https://goli8111.github.io/level-up/images/card_assets/icon_power.png";case"dexterity":return"https://goli8111.github.io/level-up/images/card_assets/icon_knowledge.png";case"intelligence":return"https://goli8111.github.io/level-up/images/card_assets/icon_skill.png";case"wisdom":return"https://goli8111.github.io/level-up/images/card_assets/icon_wisdom.png"}}()}),a.a.createElement("span",null,o)))},ft=(n(64),n(141)),vt=n(140),ht=n(143),bt=function(e){var t=e.title,n=e.onOKClick,o=e.onCloseClick,r=e.openDialog;return a.a.createElement("div",null,a.a.createElement(ft.a,{open:r,onClose:o,"aria-labelledby":"alert-dialog-title"},a.a.createElement(ht.a,{id:"alert-dialog-title",style:{textAlign:"center"}},t),a.a.createElement(vt.a,null,a.a.createElement(W.a,{onClick:o,color:"primary"},"\ucde8\uc18c"),a.a.createElement(W.a,{onClick:n,color:"primary",autoFocus:!0},"\ud655\uc778"))))},gt=Object(m.a)((function(e){return{root:{position:"relative",width:"100%"},videoContainer:{width:"100%",position:"relative"},contentsTitle:{color:"black"},BottomBarBack:{position:"fixed",backgroundColor:"#FFFFFF88",width:"100%",height:"11%",top:"89%",left:"0%"},BottomBarGroup:{position:"fixed",bottom:"70px",width:"100%"},BottomBarButton:{position:"fixed",bottom:"5px",left:"0px",width:"99%",height:"50px",backgroundColor:"orange",boxShadow:"3px 3px 1px 1px rgba(0,0,0,0.75)",color:"white"},BottomBarButton_text_1:{position:"absolute",left:"0",top:"5%",width:"100%",fontSize:"20px",fontWeight:"bold"},BottomBarButton_text_2:{position:"absolute",left:"0",top:"60%",width:"100%",fontSize:"12px"}}})),wt={setScene:d},Et=Object(u.b)((function(e){return{_posenetPose:e.posenet._posenetPose,_refreshIntro:e.scene._refreshIntro,_currentScene:e.scene._currentScene}}),wt)((function(e){e._posenetPose;var t=e.setScene,n=(e._refreshIntro,e._currentScene),o=e.rewardState,r=e.rewardCategory,i=e.rewardExp,s=gt(),l=a.a.useState(!1),u=Object(c.a)(l,2),d=u[0],p=u[1];console.log("IntroScene start");var m=function(){console.log("onPlay call"),x(),t("Play")},f=function(){console.log("onGetReward call"),v("onGetReward")},h=function(){x(),v("onSuccessAndLeave")},b=function(){p(!0),x()};return a.a.createElement("div",{className:s.root},a.a.createElement("div",{className:"contents_body"},a.a.createElement("div",{className:"contents_intro"},a.a.createElement("span",{className:".contents_intro_text"},"\uc5b4\ub514\uc2a4\ub4e0 \uac00\ubccd\uac8c!"),a.a.createElement("span",{className:"contents_intro_text_sub"},a.a.createElement("br",null),"\ub531 16\ubd84 \ud2b8\ub808\uc774\ub2dd\uc73c\ub85c \ucf54\uc5b4\ub97c \ub2e8\ub2e8\ud558\uac8c \uc870\uc774\uace0, \ubcf5\uadfc\uc744 \ud65c\uc131\ud654 \ud569\ub2c8\ub2e4.",a.a.createElement("br",null),"\ub530\ub77c\uc624\uc138\uc694")),function(){var e=[];return Object.keys(O).forEach((function(t,n){if("set"==O[t].type){var o=O[t].url;void 0==window.HybridApp&&(o=O[t].web_url),e.push(function(e,t,n){var o=n.replace(".mp4",".jpg");return o=n.replace(".webm",".jpg"),a.a.createElement("div",{key:e},a.a.createElement("span",{className:s.contentsTitle},t),a.a.createElement("div",{className:s.videoContainer},a.a.createElement(P,{key:n,title:e,enableContentsSkip:!1,enableContentsPause:!0,videoUrl:n,autoPlay:!1,enableTitleText:!1,enableFullScreen:!1,enableScreenMirror:!1,poster:o})))}(O[t].title,O[t].desc,o))}})),e}(),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("div",{className:s.BottomBarBack})),a.a.createElement("div",{className:s.BottomBarGroup},function(){var e=j(O),t=D(e,!1),c=D(e,!0);return 1==o?a.a.createElement(mt,{onClick:f,rewardCategory:r,rewardExp:i}):"IntroStampScene"==n?a.a.createElement("div",{onClick:h,className:"quest_main_disable_button"},a.a.createElement("span",null,"\uc2a4\ud0ec\ud504 \ub300\uae30 \uc911")):0==t?a.a.createElement("div",{onClick:b,className:"quest_main_button"},a.a.createElement("span",null,"\uae30\ub85d \uc81c\ucd9c\ud558\uae30")):c>0?a.a.createElement("div",{onClick:m,className:"quest_main_button"},a.a.createElement("span",null,"\uc7ac\ub3c4\uc804\ud558\uae30")):a.a.createElement("div",{onClick:m,className:s.BottomBarButton},a.a.createElement("span",{className:s.BottomBarButton_text_1},"\uc601\uc0c1 \uae30\ub85d \uc2dc\uc791"),a.a.createElement("span",{className:s.BottomBarButton_text_2},"\ucd1d 11 Set / 15 \ubd84"))}()),a.a.createElement(bt,{title:"\uc2a4\ud0ec\ud504\ub97c \ubc1b\uc744 \ub54c\uae4c\uc9c0 \ub2e4\uc2dc \uc81c\ucd9c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",onOKClick:function(){console.log("onFinishClick call"),x(),t("IntroStampScene"),p(!1)},onCloseClick:function(){p(!1),x()},openDialog:d}))})),St=Object(m.a)((function(e){return{root:{width:"100%",height:"100%",backgroundColor:"#FFFFFF"}}})),yt={setScene:d},_t=Object(u.b)((function(e){return{_currentScene:e.scene._currentScene}}),yt)((function(e){var t=e._currentScene,n=(e.setScene,e.location);console.log("Index_scene component start");var r=St(),i=a.a.useState(!1),s=Object(c.a)(i,2),u=s[0],d=s[1],p=a.a.useState(""),m=Object(c.a)(p,2),v=m[0],b=m[1],g=a.a.useState(0),w=Object(c.a)(g,2),E=w[0],S=w[1],y=a.a.useState(!1),_=Object(c.a)(y,2),x=(_[0],_[1]);Object(o.useEffect)((function(){I(O,!0).length>0&&x(!0)})),Object(o.useEffect)((function(){var e=l.a.parse(n.search);console.log(e),d("true"==e.Complete),b(e.reward_category),S(e.reward_exp)}),[n]);return a.a.createElement("div",{className:r.root},function(){switch(t){case"Result":return f(!1),h(!1),a.a.createElement(M,null);case"Play":return f(!0),h(!0),a.a.createElement(ot,null);case"BodyScan":return f(!0),h(!0),a.a.createElement(ct,null);case"Feedback":return f(!1),h(!1),a.a.createElement(dt,{resultState:!1});case"IntroScene":if(f(!1),h(!1),1==u)return a.a.createElement("div",{className:"index_contents_root"},a.a.createElement(dt,{resultState:!0}),a.a.createElement(M,null),a.a.createElement(Et,{rewardState:u,rewardCategory:v,rewardExp:E}));var e=I(O,!0);return a.a.createElement("div",{className:"index_contents_root"},e.length>0?a.a.createElement(M,null):void 0,a.a.createElement(Et,{rewardState:u,rewardCategory:v,rewardExp:E}));case"IntroStampScene":f(!1),h(!1);e=I(O,!0);return a.a.createElement("div",{className:"index_contents_root"},e.length>0?a.a.createElement(M,null):void 0,a.a.createElement(Et,{rewardState:!1}))}}())})),xt=n(68),kt=n(8);var Ct=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(xt.a,null,a.a.createElement(kt.a,{path:"/",component:_t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pt=n(30),Ot={_currentScene:"IntroScene",_currentSubScene:"",_refreshIntro:0};var Nt={_posenetPose:void 0,_closePosenet:"",_recordState:!1};var Tt={_currentTime:0,_maxTime:0};var jt=Object(Pt.b)({scene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETSCENE":return console.log("SETSCENE:"+t._changeScene),Object.assign({},e,{_currentScene:t._changeScene});case"SETSUBSCENE":return console.log("SETSUBSCENE:"+t._changeSubScene),Object.assign({},e,{_currentSubScene:t._changeSubScene});case"REFRESHINTRO":return console.log("REFRESHINTRO"),Object.assign({},e,{_refreshIntro:e._refreshIntro+1});default:return e}},posenet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETPOSENETPOSE":return Object.assign({},e,{_posenetPose:t._posenetPose});case"CLOSEPOSENET":return console.log("CLOSEPOSENET:"+t._closePosenet),Object.assign({},e,{_closePosenet:t._closePosenet});case"SETCAMERARECORD":return console.log("SETCAMERARECORD:"+t._recordState),Object.assign({},e,{_recordState:t._recordState});default:return e}},countdown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETMAXTIME":return Object.assign({},e,{_maxTime:t._maxTime});case"SETCURRENTTIME":return Object.assign({},e,{_currentTime:t._currentTime});default:return e}}}),It=document.getElementById("root"),Dt=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Rt=Object(Pt.c)(jt,Dt);i.a.render(a.a.createElement(u.a,{store:Rt},a.a.createElement(Ct,null)),It),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){},75:function(e,t,n){e.exports=n(111)},80:function(e,t,n){},81:function(e,t,n){},98:function(e,t,n){}},[[75,1,2]]]);
//# sourceMappingURL=main.e34c101a.chunk.js.map